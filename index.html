<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>오마이데스크 - 나만의 정보 분석 데스크</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/modal.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>

<body>
    <!-- 반응형 경고 오버레이 -->
    <div class="responsive-warning" id="responsiveWarning">
        <div class="warning-content">
            <div class="warning-icon">📱</div>
            <h3>화면을 넓혀주세요</h3>
            <p>오마이데스크는 데스크탑 환경에 최적화되어 있습니다.<br>
                최상의 경험을 위해 화면 크기를 1200px 이상으로 조정해주세요.</p>
        </div>
    </div>

    <!-- 메인 앱 컨테이너 -->
    <div class="app-container" id="appContainer">
        <!-- 메뉴바 -->
        <nav class="menu-bar">
            <div class="menu-top">
                <div class="logo">
                    <span class="logo-text">🎙️ OMYDESK</span>
                </div>
                <div class="menu-items">
                    <button class="menu-item new-project-btn" data-tab="briefing">
                        <i class="ph-fill ph-plus-circle menu-icon-active"></i>
                        <i class="ph ph-plus-circle menu-icon-inactive"></i>
                        <span class="menu-label">새 레터</span>
                    </button>
                    <button class="menu-item active" data-tab="home">
                        <i class="ph-fill ph-house menu-icon-active"></i>
                        <i class="ph ph-house menu-icon-inactive"></i>
                        <span class="menu-label">홈</span>
                    </button>
                    
                    <button class="menu-item" data-tab="projects">
                        <i class="ph-fill ph-browsers menu-icon-active"></i>
                        <i class="ph ph-browsers menu-icon-inactive"></i>
                        <span class="menu-label">내 레터</span>
                    </button>
                    <button class="menu-item" data-tab="analysis">
                        <i class="ph-fill ph-chart-line-up menu-icon-active"></i>
                        <i class="ph ph-chart-line-up menu-icon-inactive"></i>
                        <span class="menu-label">분석</span>
                    </button>
                    <button class="menu-item" data-tab="bookmarks">
                        <i class="ph-fill ph-star menu-icon-active"></i>
                        <i class="ph ph-star menu-icon-inactive"></i>
                        <span class="menu-label">스크랩</span>
                    </button>
                </div>
            </div>

            <!-- 프로필 섹션 -->
            <div class="profile-section">
                <button class="profile-button" id="profileButton">
                    <img src="images/profile.png" alt="프로필" class="profile-image">
                    <div class="profile-info">
                        <span class="profile-name">Hosan Ryu</span>
                    </div>
                </button>
                <button class="settings-button" data-tab="settings">
                    <i class="ph ph-gear"></i>
                </button>

                <!-- 드롭다운 메뉴 -->
                <div class="profile-dropdown" id="profileDropdown">
                    <div class="profile-dropdown-content">
                        <button class="dropdown-item" id="accountManageBtn">
                            <i class="ph ph-user-circle"></i>
                            <span>계정 관리</span>
                        </button>
                        <button class="dropdown-item" id="logoutBtn">
                            <i class="ph ph-sign-out"></i>
                            <span>로그아웃</span>
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- 홈 탭 콘텐츠 (기본) -->
        <div class="tab-content active" id="homeTab">
            <div class="home-main-content">
                <header class="home-header">
                    <div class="search-bar">
                        <i class="ph ph-magnifying-glass"></i>
                        <input type="text" placeholder="검색">
                    </div>
                    <div class="header-actions">
                        <button class="notification-btn"><i class="ph ph-bell"></i></button>
                    </div>
                </header>
                <div class="feed-section">
                    <div class="feed-nav">
                        <button class="active">추천</button>
                        <button>구독</button>
                        <button>문화</button>
                        <button>기술</button>
                        <button>경제</button>
                        <button>정치</button>
                        <button>금융</button>
                        <button>음식</button>
                        <button>스포츠</button>
                        <button>미술</button>
                        <button>정치</button>
                        <button>건강</button>
                        <button>뉴스</button>
                        <button>패션</button>
                    </div>
                    <div class="feed-list">
                    </div>
                </div>
            </div>
            <aside class="home-right-sidebar">
                <section class="highlights-section">
                    <div class="section-header">
                        <h2>하이라이트</h2>
                    </div>
                    <div class="highlight-summary">
                        <p>💡 Naval이 또다른 훌륭한 행복에 관한 뉴스레터를 발행했습니다.<br><br> 🤖 3개의 뉴스에서 AI 안전성 논쟁과 글로벌 기업들의 신제품 출시 지연을 다룹니다. <br><br> 🚫 EU의 AI 규제안 합의로 인해 기술 기업들의 대응이 주목됩니다.</p>
                    
                </section>
                <section class="sources-section">
                    <div class="section-header">
                        <h2>원본으로 읽기</h2>
                        <span class="date-tag">7월 14일</span>
                    </div>
                    <ul class="sources-list">
                        <li class="source-item">
                            <img src="sources/x.png" alt="X (Twitter)" class="source-icon">
                            <div class="source-content">
                                <div class="source-header">
                                    <span class="source-name">Tim Cook @ X</span>
                                    <span class="source-time">08:15</span>
                                </div>
                                <p class="source-text">"Vision Pro는 혁신적인 사용자 경험을 제공할 것입니다. 완벽한 제품을 위해 출시 일정을 조정했습니다."</p>
                            </div>
                        </li>
                        <li class="source-item">
                            <img src="sources/naver.png" alt="네이버 뉴스" class="source-icon">
                            <div class="source-content">
                                <div class="source-header">
                                    <span class="source-name">IT동아</span>
                                    <span class="source-time">10:30</span>
                                </div>
                                <p class="source-text">EU AI 규제안 주요 내용: 위험도에 따른 4단계 규제체계 도입... AI 블랙리스트 지정도</p>
                            </div>
                        </li>
                        <li class="source-item">
                            <img src="sources/google.png" alt="Google News" class="source-icon">
                            <div class="source-content">
                                <div class="source-header">
                                    <span class="source-name">Science Daily</span>
                                    <span class="source-time">11:45</span>
                                </div>
                                <p class="source-text">NASA's Perseverance rover finds new evidence suggesting ancient microbial life on Mars</p>
                            </div>
                        </li>
                    </ul>
                </section>
                <section class="recommended-section">
                    <div class="section-header">
                        <h2>추천 구독</h2>
                    </div>
                    <ul class="recommended-list">
                    </ul>
                </section>
            </aside>
        </div>

        <!-- 브리핑 탭 콘텐츠 -->
        <div class="tab-content" id="briefingTab">
            <!-- 상단 탭 네비게이션 -->
            <div class="briefing-tab-nav">
                <button class="briefing-tab-btn active" data-briefing-tab="upload">
                    <div class="step-number">Step 1</div>
                    <span>자료 업로드</span>
                </button>
                <button class="briefing-tab-btn" data-briefing-tab="analysis">
                    <div class="step-number">Step 2</div>
                    <span>상세 분석</span>
                </button>
                <button class="briefing-tab-btn" data-briefing-tab="report">
                    <div class="step-number">Step 3</div>
                    <span>리포트 생성</span>
                </button>
            </div>

            <!-- 탭 콘텐츠 영역 -->
            <div class="briefing-tab-content">
                <!-- 소스 업로드 탭 -->
                <div class="briefing-tab-panel active" id="uploadPanel">
                    <div class="upload-container">
                        <!-- 파일 업로드 섹션 -->
                        <div class="upload-section">
                            <div class="file-upload-area">
                                <div class="upload-icon">📤</div>
                                <h3>파일 업로드</h3>
                                <input type="file" id="fileInput" multiple accept=".pdf,.docx,.hwp,.txt"
                                    style="display: none;">
                                <button class="upload-btn" onclick="document.getElementById('fileInput').click()">파일
                                    선택</button>
                            </div>
                        </div>

                        <!-- URL 업로드 섹션 -->
                        <div class="upload-section">
                            <div class="url-upload-area">
                                <div class="url-icon">🔗</div>
                                <h3>URL 입력</h3>
                                <div class="url-input-container">
                                    <div class="url-input-wrapper">
                                        <span class="url-prefix">🌐</span>
                                        <input type="url" class="url-input-field" placeholder="https://" id="urlInput">
                                    </div>
                                    <button class="url-submit-btn" id="urlSubmitBtn">입력</button>
                                </div>
                            </div>
                        </div>

                        <!-- 업로드된 자료 목록 -->
                        <div class="uploaded-materials">
                            <h2 class="materials-title">업로드 자료</h2>
                            <div class="materials-list">
                                <div class="material-item">
                                    <div class="material-number">1.</div>
                                    <div class="material-source">🌐 TechCrunch</div>
                                    <div class="material-content">
                                        <h4>Elon Musk's xAI launches Grok 4 alongside a $300 ... - TechCrunch</h4>
                                        <p>Elon Musk and xAI employee announced on Wednesday night the launch of the
                                            startup's next flagship AI model, Grok 4.</p>
                                    </div>
                                </div>

                                <div class="material-item">
                                    <div class="material-number">2.</div>
                                    <div class="material-source">📰 THE-DECODER.com</div>
                                    <div class="material-content">
                                        <h4>Musk unveils Grok 4 as xAI's new AI model that beats ... - The Decoder</h4>
                                        <p>Amid backlash over antisemitic content and major leadership shakeups, Elon
                                            Musk has introduced Grok 4, the latest flagship AI model from xAI.</p>
                                    </div>
                                </div>

                                <div class="material-item">
                                    <div class="material-number">3.</div>
                                    <div class="material-source">📺 CBS News</div>
                                    <div class="material-content">
                                        <h4>Musk unveils Grok 4 update a day after xAI chatbot made antisemitic remarks
                                        </h4>
                                        <p>Musk's xAI released an updated version of Grok a day after the chatbot made
                                            antisemitic posts on X.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 플로팅 다음 버튼 -->

                </div>

                <!-- 상세 분석 탭 -->
                <div class="briefing-tab-panel" id="analysisPanel">
                    <div class="analysis-container">
                        <!-- 메인 콘텐츠 영역 -->
                        <div class="analysis-main">
                            <!-- 다이어그램 영역 -->
                            <div class="diagram-section">
                                <div class="diagram-header">
                                    <h3>어피니티 다이어그램 분석</h3>
                                    <div class="diagram-controls">
                                        <button class="diagram-btn" id="zoomInBtn">
                                            <i class="ph ph-plus"></i>
                                        </button>
                                        <button class="diagram-btn" id="zoomOutBtn">
                                            <i class="ph ph-minus"></i>
                                        </button>
                                        <button class="diagram-btn" id="fitToScreenBtn">
                                            <i class="ph ph-arrows-out"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="diagram-viewport">
                                    <img src="images/diagram.png" alt="어피니티 다이어그램" class="diagram-image"
                                        id="mainDiagram">
                                    <div class="diagram-overlay">
                                        <!-- 클릭 가능한 영역들 (보로노이 셀 클릭) -->
                                        <button class="cluster-hotspot" data-cluster="1"
                                            style="top: 25%; left: 20%; width: 180px; height: 120px;"
                                            title="기준금리 인상 우려"></button>
                                        <button class="cluster-hotspot" data-cluster="2"
                                            style="top: 45%; left: 45%; width: 200px; height: 140px;"
                                            title="테크주 밸류에이션 부담"></button>
                                        <button class="cluster-hotspot" data-cluster="3"
                                            style="top: 20%; right: 25%; width: 160px; height: 110px;"
                                            title="중국 경제 둔화 심화"></button>
                                    </div>
                                </div>
                            </div>

                            <!-- 데이터 테이블 영역 -->
                            <div class="data-table-section">
                                <div class="table-header">
                                    <h4>클러스터 데이터</h4>
                                    <div class="table-actions">
                                        <button class="table-btn primary" id="addRowBtn">클러스터 추가</button>
                                        <button class="table-btn secondary" id="exportTableBtn">데이터 내보내기</button>
                                    </div>
                                </div>
                                <div class="table-container">
                                    <table class="analysis-table" id="analysisTable">
                                        <thead>
                                            <tr>
                                                <th>클러스터 레이블</th>
                                                <th>상위 카테고리</th>
                                                <th>텍스트 수</th>
                                                <th>중요도</th>
                                                <th>대표 텍스트</th>
                                                <th>클러스터 크기</th>
                                                <th>키워드</th>
                                                <th>액션</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="editable-row" data-cluster="1">
                                                <td contenteditable="true">기준금리 인상 우려</td>
                                                <td contenteditable="true">통화정책 리스크</td>
                                                <td contenteditable="true">47</td>
                                                <td>
                                                    <select class="importance-select">
                                                        <option value="높음" selected>높음</option>
                                                        <option value="중간">중간</option>
                                                        <option value="낮음">낮음</option>
                                                    </select>
                                                </td>
                                                <td contenteditable="true">Fed의 추가 금리인상 시사로 유동성 경색 우려 확산...</td>
                                                <td contenteditable="true">대</td>
                                                <td contenteditable="true">#Fed #금리인상 #양적긴축 #인플레이션</td>
                                                <td>
                                                    <div class="row-actions">
                                                        <button class="action-btn edit" title="편집">
                                                            <i class="ph ph-pencil"></i>
                                                        </button>
                                                        <button class="action-btn delete" title="삭제">
                                                            <i class="ph ph-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="editable-row" data-cluster="2">
                                                <td contenteditable="true">테크주 밸류에이션 부담</td>
                                                <td contenteditable="true">기술주 과대평가</td>
                                                <td contenteditable="true">34</td>
                                                <td>
                                                    <select class="importance-select">
                                                        <option value="높음">높음</option>
                                                        <option value="중간" selected>중간</option>
                                                        <option value="낮음">낮음</option>
                                                    </select>
                                                </td>
                                                <td contenteditable="true">나스닥 PER 35배 돌파, AI 버블 우려 목소리 증가...</td>
                                                <td contenteditable="true">대</td>
                                                <td contenteditable="true">#테크주 #AI버블 #밸류에이션 #나스닥</td>
                                                <td>
                                                    <div class="row-actions">
                                                        <button class="action-btn edit" title="편집">
                                                            <i class="ph ph-pencil"></i>
                                                        </button>
                                                        <button class="action-btn delete" title="삭제">
                                                            <i class="ph ph-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="editable-row" data-cluster="3">
                                                <td contenteditable="true">중국 경제 둔화 심화</td>
                                                <td contenteditable="true">글로벌 성장 둔화</td>
                                                <td contenteditable="true">29</td>
                                                <td>
                                                    <select class="importance-select">
                                                        <option value="높음" selected>높음</option>
                                                        <option value="중간">중간</option>
                                                        <option value="낮음">낮음</option>
                                                    </select>
                                                </td>
                                                <td contenteditable="true">중국 GDP 성장률 4.5%로 하향, 부동산 위기 지속...</td>
                                                <td contenteditable="true">대</td>
                                                <td contenteditable="true">#중국경제 #부동산위기 #수출둔화 #GDP</td>
                                                <td>
                                                    <div class="row-actions">
                                                        <button class="action-btn edit" title="편집">
                                                            <i class="ph ph-pencil"></i>
                                                        </button>
                                                        <button class="action-btn delete" title="삭제">
                                                            <i class="ph ph-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="editable-row" data-cluster="4">
                                                <td contenteditable="true">지정학적 리스크 고조</td>
                                                <td contenteditable="true">정치적 불안정</td>
                                                <td contenteditable="true">19</td>
                                                <td>
                                                    <select class="importance-select">
                                                        <option value="높음">높음</option>
                                                        <option value="중간" selected>중간</option>
                                                        <option value="낮음">낮음</option>
                                                    </select>
                                                </td>
                                                <td contenteditable="true">우크라이나 전쟁 장기화, 중동 정세 불안 지속...</td>
                                                <td contenteditable="true">중</td>
                                                <td contenteditable="true">#지정학 #전쟁 #VIX #안전자산</td>
                                                <td>
                                                    <div class="row-actions">
                                                        <button class="action-btn edit" title="편집">
                                                            <i class="ph ph-pencil"></i>
                                                        </button>
                                                        <button class="action-btn delete" title="삭제">
                                                            <i class="ph ph-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="editable-row" data-cluster="5">
                                                <td contenteditable="true">인플레이션 재가속 위험</td>
                                                <td contenteditable="true">물가상승 압력</td>
                                                <td contenteditable="true">22</td>
                                                <td>
                                                    <select class="importance-select">
                                                        <option value="높음" selected>높음</option>
                                                        <option value="중간">중간</option>
                                                        <option value="낮음">낮음</option>
                                                    </select>
                                                </td>
                                                <td contenteditable="true">CPI 3.7%로 상승, 근원물가 강세 지속으로 연준 딜레마...</td>
                                                <td contenteditable="true">중</td>
                                                <td contenteditable="true">#CPI #물가 #근원물가 #임금인상</td>
                                                <td>
                                                    <div class="row-actions">
                                                        <button class="action-btn edit" title="편집">
                                                            <i class="ph ph-pencil"></i>
                                                        </button>
                                                        <button class="action-btn delete" title="삭제">
                                                            <i class="ph ph-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="editable-row" data-cluster="6">
                                                <td contenteditable="true">달러 강세 지속</td>
                                                <td contenteditable="true">환율 리스크</td>
                                                <td contenteditable="true">15</td>
                                                <td>
                                                    <select class="importance-select">
                                                        <option value="높음">높음</option>
                                                        <option value="중간" selected>중간</option>
                                                        <option value="낮음">낮음</option>
                                                    </select>
                                                </td>
                                                <td contenteditable="true">DXY 106 돌파, 원/달러 1,380원대 접근으로 수입물가 상승...</td>
                                                <td contenteditable="true">중</td>
                                                <td contenteditable="true">#달러강세 #DXY #환율 #금리차</td>
                                                <td>
                                                    <div class="row-actions">
                                                        <button class="action-btn edit" title="편집">
                                                            <i class="ph ph-pencil"></i>
                                                        </button>
                                                        <button class="action-btn delete" title="삭제">
                                                            <i class="ph ph-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="editable-row" data-cluster="7">
                                                <td contenteditable="true">반도체 업계 하향 조정</td>
                                                <td contenteditable="true">산업 사이클 역전</td>
                                                <td contenteditable="true">26</td>
                                                <td>
                                                    <select class="importance-select">
                                                        <option value="높음">높음</option>
                                                        <option value="중간" selected>중간</option>
                                                        <option value="낮음">낮음</option>
                                                    </select>
                                                </td>
                                                <td contenteditable="true">메모리 반도체 가격 하락세, 중국 수요 부진 장기화...</td>
                                                <td contenteditable="true">중</td>
                                                <td contenteditable="true">#반도체 #메모리 #삼성전자 #사이클</td>
                                                <td>
                                                    <div class="row-actions">
                                                        <button class="action-btn edit" title="편집">
                                                            <i class="ph ph-pencil"></i>
                                                        </button>
                                                        <button class="action-btn delete" title="삭제">
                                                            <i class="ph ph-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="editable-row" data-cluster="8">
                                                <td contenteditable="true">부동산 시장 침체</td>
                                                <td contenteditable="true">자산 가격 조정</td>
                                                <td contenteditable="true">31</td>
                                                <td>
                                                    <select class="importance-select">
                                                        <option value="높음" selected>높음</option>
                                                        <option value="중간">중간</option>
                                                        <option value="낮음">낮음</option>
                                                    </select>
                                                </td>
                                                <td contenteditable="true">서울 아파트 매매가 7개월 연속 하락, 거래량 급감...</td>
                                                <td contenteditable="true">대</td>
                                                <td contenteditable="true">#부동산 #아파트 #금리 #PF</td>
                                                <td>
                                                    <div class="row-actions">
                                                        <button class="action-btn edit" title="편집">
                                                            <i class="ph ph-pencil"></i>
                                                        </button>
                                                        <button class="action-btn delete" title="삭제">
                                                            <i class="ph ph-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="editable-row" data-cluster="9">
                                                <td contenteditable="true">공급망 차질 재발</td>
                                                <td contenteditable="true">글로벌 물류 리스크</td>
                                                <td contenteditable="true">18</td>
                                                <td>
                                                    <select class="importance-select">
                                                        <option value="높음">높음</option>
                                                        <option value="중간" selected>중간</option>
                                                        <option value="낮음">낮음</option>
                                                    </select>
                                                </td>
                                                <td contenteditable="true">홍해 운송로 차단, 수에즈 운하 우회로 물류비 급증...</td>
                                                <td contenteditable="true">중</td>
                                                <td contenteditable="true">#공급망 #물류 #홍해 #BDI</td>
                                                <td>
                                                    <div class="row-actions">
                                                        <button class="action-btn edit" title="편집">
                                                            <i class="ph ph-pencil"></i>
                                                        </button>
                                                        <button class="action-btn delete" title="삭제">
                                                            <i class="ph ph-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr class="editable-row" data-cluster="10">
                                                <td contenteditable="true">에너지 가격 변동성</td>
                                                <td contenteditable="true">원자재 불안정</td>
                                                <td contenteditable="true">24</td>
                                                <td>
                                                    <select class="importance-select">
                                                        <option value="높음" selected>높음</option>
                                                        <option value="중간">중간</option>
                                                        <option value="낮음">낮음</option>
                                                    </select>
                                                </td>
                                                <td contenteditable="true">WTI 유가 90달러 돌파, OPEC+ 감산 연장 결정...</td>
                                                <td contenteditable="true">중</td>
                                                <td contenteditable="true">#유가 #OPEC #에너지 #원자재</td>
                                                <td>
                                                    <div class="row-actions">
                                                        <button class="action-btn edit" title="편집">
                                                            <i class="ph ph-pencil"></i>
                                                        </button>
                                                        <button class="action-btn delete" title="삭제">
                                                            <i class="ph ph-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- 우측 사이드바 -->
                        <div class="analysis-sidebar">
                            <!-- 통합된 원인 분석 섹션 -->
                            <div class="unified-analysis-section">
                                <!-- 기본 상태 (선택되지 않은 상태) -->
                                <div class="analysis-empty-state" id="analysisEmptyState">
                                    <div class="empty-state-icon">
                                        <i class="ph ph-cursor-click"></i>
                                    </div>
                                    <h4>클러스터를 선택해서 심층 분석하세요</h4>
                                    <p>다이어그램의 클러스터를 클릭하면<br>해당 리스크 요인의 근본 원인과 투자 시사점을 확인할 수 있습니다.</p>
                                </div>

                                <!-- 분석 상태 (클러스터 선택된 상태) -->
                                <div class="analysis-content-state" id="analysisContentState" style="display: none;">
                                    <div class="analysis-title-section">
                                        <h3 id="analysisTitle"></h3>
                                        <br></br>
                                    </div>




                                    <!-- 원인 분석 -->
                                    <div class="causes-section">
                                        <div class="causes-header">
                                            <h5>🎯 원인 분석</h5>
                                            <button class="ai-research-btn" id="aiResearchBtn" title="AI 딥 리서치">
                                                <i class="ph ph-magic-wand"></i>
                                                <span>AI 딥 리서치</span>
                                            </button>
                                        </div>
                                        <div class="causes-list" id="causesList">
                                            <!-- 다양한 관점으로 다루어진 원인 -->
                                            <div class="cause-item multi-perspective" data-type="multi">
                                                <div class="cause-content">

                                                    <span class="cause-text">Fed의 공격적 통화정책 스탠스 지속</span>
                                                </div>
                                                <div class="cause-sources">
                                                    <div class="source-info multi">
                                                        <span class="source-count">4개 소스</span>
                                                        <span class="source-desc">다른 관점으로 분석</span>
                                                    </div>
                                                    <div class="source-icons">
                                                        <img src="sources/naver.png" alt="네이버" class="source-icon"
                                                            title="네이버 뉴스">
                                                        <img src="sources/google.png" alt="구글" class="source-icon"
                                                            title="구글 뉴스">
                                                        <img src="sources/x.png" alt="X" class="source-icon"
                                                            title="X (Twitter)">
                                                        <span class="more-sources">+1</span>
                                                    </div>
                                                    <button class="view-sources-btn" title="원본 보기">
                                                        <i class="ph ph-arrow-square-out"></i>
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- 추가 자료가 있는 원인 -->
                                            <div class="cause-item additional-sources" data-type="additional">
                                                <div class="cause-content">

                                                    <span class="cause-text">인플레이션 억제를 위한 터미널 금리 상향 조정</span>
                                                </div>
                                                <div class="cause-sources">
                                                    <div class="source-info additional">
                                                        <span class="source-count">3개 자료</span>
                                                        <span class="source-desc">추가 참고 자료</span>
                                                    </div>
                                                    <div class="source-icons">
                                                        <img src="sources/facebook.png" alt="페이스북" class="source-icon"
                                                            title="페이스북">
                                                        <img src="sources/naver.png" alt="네이버" class="source-icon"
                                                            title="네이버 뉴스">
                                                        <img src="sources/google.png" alt="구글" class="source-icon"
                                                            title="구글 뉴스">
                                                    </div>
                                                    <button class="view-sources-btn" title="원본 보기">
                                                        <i class="ph ph-arrow-square-out"></i>
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- 다양한 관점으로 다루어진 원인 -->
                                            <div class="cause-item multi-perspective" data-type="multi">
                                                <div class="cause-content">

                                                    <span class="cause-text">장기 채권 수익률 곡선 역전 해소 시점 관찰</span>
                                                </div>
                                                <div class="cause-sources">
                                                    <div class="source-info multi">
                                                        <span class="source-count">2개 소스</span>
                                                        <span class="source-desc">다른 관점으로 분석</span>
                                                    </div>
                                                    <div class="source-icons">
                                                        <img src="sources/x.png" alt="X" class="source-icon"
                                                            title="X (Twitter)">
                                                        <img src="sources/google.png" alt="구글" class="source-icon"
                                                            title="구글 뉴스">
                                                    </div>
                                                    <button class="view-sources-btn" title="원본 보기">
                                                        <i class="ph ph-arrow-square-out"></i>
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- 추가 자료가 있는 원인 -->
                                            <div class="cause-item additional-sources" data-type="additional">
                                                <div class="cause-content">

                                                    <span class="cause-text">연준 점도표와 경제 데이터 모니터링</span>
                                                </div>
                                                <div class="cause-sources">
                                                    <div class="source-info additional">
                                                        <span class="source-count">5개 자료</span>
                                                        <span class="source-desc">추가 참고 자료</span>
                                                    </div>
                                                    <div class="source-icons">
                                                        <img src="sources/naver.png" alt="네이버" class="source-icon"
                                                            title="네이버 뉴스">
                                                        <img src="sources/facebook.png" alt="페이스북" class="source-icon"
                                                            title="페이스북">
                                                        <span class="more-sources">+3</span>
                                                    </div>
                                                    <button class="view-sources-btn" title="원본 보기">
                                                        <i class="ph ph-arrow-square-out"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 리포트 탭 -->
                <div class="briefing-tab-panel" id="reportPanel">
                    <div class="report-container">
                        <!-- 좌측: 분석 결과 확인 영역 -->
                        <div class="report-sidebar">
                            <div class="report-summary-card">
                                <h3>분석자료 확인</h3>
                                <div class="summary-stats">
                                    <div class="summary-stat">
                                        <span class="stat-value">13</span>
                                        <span class="stat-label">이슈</span>
                                    </div>
                                    <div class="summary-stat">
                                        <span class="stat-value">43</span>
                                        <span class="stat-label">출처</span>
                                    </div>
                                </div>

                                <div class="summary-actions">

                                    <button class="summary-action-btn primary" id="generateReportBtn">
                                        <i class="ph ph-file-text"></i>
                                        <span>만들기</span>
                                    </button>
                                </div>
                            </div>

                            <!-- 생성 옵션 -->
                            <div class="report-options-card">
                                <h4>리포트 옵션</h4>
                                <div class="report-options">
                                    <label class="option-item">
                                        <input type="checkbox" id="includeCharts" checked>
                                        <span class="option-checkmark"></span>
                                        <span class="option-label">차트 및 그래프 포함</span>
                                    </label>
                                    <label class="option-item">
                                        <input type="checkbox" id="includeSourcesList" checked>
                                        <span class="option-checkmark"></span>
                                        <span class="option-label">출처 목록 포함</span>
                                    </label>
                                    <label class="option-item">
                                        <input type="checkbox" id="includeExecutiveSummary" checked>
                                        <span class="option-checkmark"></span>
                                        <span class="option-label">요약 포함</span>
                                    </label>
                                    <label class="option-item">
                                        <input type="checkbox" id="includeRecommendations">
                                        <span class="option-checkmark"></span>
                                        <span class="option-label">개선 제안 포함</span>
                                    </label>
                                </div>
                            </div>

                            <!-- 템플릿 선택 -->
                            <div class="report-template-card">
                                <h4>리포트 템플릿</h4>
                                <div class="template-options">
                                    <label class="template-option">
                                        <input type="radio" name="template" value="standard" checked>
                                        <span class="template-radio"></span>
                                        <div class="template-info">
                                            <span class="template-name">표준 리포트</span>
                                            <span class="template-desc">일반적인 분석 리포트 형식</span>
                                        </div>
                                    </label>
                                    <label class="template-option">
                                        <input type="radio" name="template" value="executive">
                                        <span class="template-radio"></span>
                                        <div class="template-info">
                                            <span class="template-name">요약 리포트</span>
                                            <span class="template-desc">핵심 내용 중심의 간결한 형식</span>
                                        </div>
                                    </label>
                                    <label class="template-option">
                                        <input type="radio" name="template" value="detailed">
                                        <span class="template-radio"></span>
                                        <div class="template-info">
                                            <span class="template-name">상세 리서치</span>
                                            <span class="template-desc">심층 분석 결과 포함</span>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 우측: 미리보기 영역 -->
                        <div class="report-preview">
                            <div class="preview-header">
                                <h3>미리보기</h3>
                                <div class="preview-actions">
                                    <button class="preview-action-btn secondary" id="copyTextBtn">
                                        <i class="ph ph-copy"></i>
                                        <span>텍스트 복사</span>
                                    </button>
                                    <button class="preview-action-btn secondary" id="copyMarkdownBtn">
                                        <i class="ph ph-code"></i>
                                        <span>마크다운 복사</span>
                                    </button>
                                    <button class="preview-action-btn primary" id="exportReportBtn">
                                        <i class="ph ph-download-simple"></i>
                                        <span>내보내기</span>
                                    </button>
                                </div>
                            </div>

                            <div class="preview-content">
                                <div class="markdown-editor-wrapper">
                                    <div class="markdown-content" id="markdownContent">
                                        <div class="loading-state" id="reportLoadingState">
                                            <div class="loading-icon">
                                                <i class="ph ph-file-text"></i>
                                            </div>
                                            <h4>리포트를 생성하려면 '만들기' 버튼을 클릭하세요</h4>
                                            <p>분석된 데이터를 바탕으로 전문적인 리포트를 자동으로 생성합니다.</p>
                                        </div>

                                        <div class="report-content" id="reportContent" style="display: none;">
                                            <pre class="markdown-preview"># 시장 분석 리포트
*생성일: 2024년 12월 19일*

## 📊 주요 요약

### 핵심 이슈
- **기준금리 인상 우려**: Fed의 공격적 통화정책 스탠스 지속
- **테크주 밸류에이션 부담**: AI 버블 우려와 실적 하향 조정
- **중국 경제 둔화 심화**: 부동산 위기와 수출 둔화 가속

### 시장 영향
- 글로벌 유동성 경색 심화
- 리스크 자산 선호도 하락
- 안전자산 선호 현상 지속

## 🎯 상세 분석

### 1. 통화정책 리스크

**현황**
- Fed의 터미널 금리 전망 상향 조정
- 양적긴축 정책 지속으로 시장 유동성 제약
- 장기 채권 수익률 상승 압력 증가

**영향**
- 금융시장 변동성 확대
- 신용 스프레드 확대
- 달러 강세 지속 가능성

### 2. 기술주 조정 리스크

**현황**
- 나스닥 PER 35배 돌파로 과대평가 우려
- AI 관련 투자 ROI 불확실성 증가
- 실적 성장률 둔화 전망

**영향**
- 성장주 포트폴리오 재조정 필요
- 밸류에이션 리스크 관리 중요
- 섹터 로테이션 가속화 예상

### 3. 중국 경제 둔화

**현황**
- GDP 성장률 4.5%로 하향 조정
- 부동산 시장 위기 지속
- 수출 경쟁력 약화

**영향**
- 글로벌 공급망 재편 가속
- 원자재 수요 둔화
- 아시아 경제 전반 영향

## 📈 투자 시사점

### 단기 전략
1. **방어적 포지션 강화**
   - 현금 비중 확대
   - 안전자산 편입 증가
   - 변동성 헤지 전략 적용

2. **섹터 선별**
   - 필수소비재 및 유틸리티 선호
   - 고성장 기술주 비중 축소
   - 배당주 및 가치주 관심 증가

### 중장기 전략
1. **포트폴리오 다변화**
   - 지역별 분산투자 강화
   - 대안투자 비중 확대
   - ESG 요소 고려 증가

2. **리스크 관리**
   - 환헤지 전략 강화
   - 금리 리스크 관리
   - 유동성 관리 중요성 증대

## 🔍 모니터링 포인트

### 주요 지표
- Fed 통화정책 회의 결과
- 중국 경제 지표 발표
- 기업 실적 발표 시즌

### 핵심 리스크
- 지정학적 리스크 확대
- 인플레이션 재가속
- 금융시스템 안정성

## 📝 결론

현재 시장은 **통화정책 불확실성**과 **경제 성장 둔화** 우려가 복합적으로 작용하고 있습니다. 

**단기적**으로는 방어적 포지션 강화와 변동성 관리가 중요하며, **중장기적**으로는 포트폴리오 다변화와 리스크 관리 체계 구축이 필요합니다.

---

*본 리포트는 AI 분석 시스템을 통해 생성되었으며, 투자 결정 시 추가적인 전문가 검토를 권장합니다.*</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 프로젝트 탭 콘텐츠 -->
        <div class="tab-content" id="projectsTab">
            <div class="projects-container">
                <!-- 프로젝트 리스트 뷰 -->
                <div class="project-list-view" id="projectListView">
                    <!-- 헤더 -->
                    <header class="project-header">
                        <div class="project-title-section">
                            <h1 class="project-main-title">내 레터</h1>
                            <p class="project-description">그동안 작성한 모든 레터를 관리하세요</p>
                        </div>
                        <div class="project-actions">
                            <button class="project-action-btn new-btn" id="newProjectBtn">
                                <i class="ph ph-plus"></i>
                                <span>새 레터</span>
                            </button>
                        </div>
                    </header>

                    <!-- 프로젝트 리스트 -->
                    <div class="project-list">
                        <div class="project-card" data-project-id="grok4-analysis">
                            <div class="project-card-header">
                                <div class="project-status completed">
                                    <i class="ph ph-check-circle"></i>
                                    <span>완료</span>
                                </div>
                                <div class="project-date">2024.12.19</div>
                            </div>
                            <div class="project-card-content">
                                <h3 class="project-title">Grok 4 출시 분석</h3>
                                <p class="project-summary">일론 머스크의 xAI에서 발표한 Grok 4 모델의 시장 영향과 경쟁사 대응 전략에 대한 종합 분석</p>
                                <div class="project-stats">
                                    <div class="stat-item">
                                        <i class="ph ph-file-text"></i>
                                        <span>3개 출처</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="ph ph-chart-bar"></i>
                                        <span>5개 클러스터</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="ph ph-article"></i>
                                        <span>리포트 생성됨</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="project-card" data-project-id="crypto-trend">
                            <div class="project-card-header">
                                <div class="project-status completed">
                                    <i class="ph ph-check-circle"></i>
                                    <span>완료</span>
                                </div>
                                <div class="project-date">2024.12.18</div>
                            </div>
                            <div class="project-card-content">
                                <h3 class="project-title">암호화폐 시장 동향</h3>
                                <p class="project-summary">비트코인 ETF 승인 이후 암호화폐 시장의 변화와 주요 코인들의 가격 움직임 분석</p>
                                <div class="project-stats">
                                    <div class="stat-item">
                                        <i class="ph ph-file-text"></i>
                                        <span>8개 출처</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="ph ph-chart-bar"></i>
                                        <span>7개 클러스터</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="ph ph-article"></i>
                                        <span>리포트 생성됨</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="project-card" data-project-id="fed-policy">
                            <div class="project-card-header">
                                <div class="project-status in-progress">
                                    <i class="ph ph-clock"></i>
                                    <span>진행중</span>
                                </div>
                                <div class="project-date">2024.12.17</div>
                            </div>
                            <div class="project-card-content">
                                <h3 class="project-title">Fed 통화정책 분석</h3>
                                <p class="project-summary">연준의 금리 인상 정책이 글로벌 경제에 미치는 영향과 향후 전망에 대한 심층 분석</p>
                                <div class="project-stats">
                                    <div class="stat-item">
                                        <i class="ph ph-file-text"></i>
                                        <span>12개 출처</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="ph ph-chart-bar"></i>
                                        <span>9개 클러스터</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="ph ph-article"></i>
                                        <span>분석중</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="project-card" data-project-id="korean-startup">
                            <div class="project-card-header">
                                <div class="project-status completed">
                                    <i class="ph ph-check-circle"></i>
                                    <span>완료</span>
                                </div>
                                <div class="project-date">2024.12.16</div>
                            </div>
                            <div class="project-card-content">
                                <h3 class="project-title">한국 스타트업 생태계</h3>
                                <p class="project-summary">2024년 한국 스타트업 투자 동향과 주요 성장 분야에 대한 종합적인 시장 분석</p>
                                <div class="project-stats">
                                    <div class="stat-item">
                                        <i class="ph ph-file-text"></i>
                                        <span>6개 출처</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="ph ph-chart-bar"></i>
                                        <span>4개 클러스터</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="ph ph-article"></i>
                                        <span>리포트 생성됨</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 프로젝트 상세 뷰 -->
                <div class="project-detail-view" id="projectDetailView" style="display: none;">
                    <!-- 상세 뷰 헤더 -->
                    <header class="project-detail-header">
                        <div class="detail-header-left">
                            <button class="back-btn" id="backToListBtn">
                                <i class="ph ph-arrow-left"></i>
                                <span>목록</span>
                            </button>
                            <div class="project-detail-title">
                                <h1 id="projectDetailTitle">프로젝트 제목</h1>
                                <p id="projectDetailSummary">프로젝트 요약</p>
                            </div>
                        </div>
                        <div class="detail-header-right">
                            <div class="project-detail-status" id="projectDetailStatus">
                                <i class="ph ph-check-circle"></i>
                                <span>완료</span>
                            </div>
                        </div>
                    </header>

                    <!-- 상세 뷰 탭 네비게이션 -->
                    <div class="project-detail-tabs">
                        <button class="detail-tab-btn active" data-detail-tab="sources">
                            <i class="ph ph-file-text"></i>
                            <span>출처</span>
                        </button>
                        <button class="detail-tab-btn" data-detail-tab="diagram">
                            <i class="ph ph-chart-scatter"></i>
                            <span>다이어그램</span>
                        </button>
                        <button class="detail-tab-btn" data-detail-tab="report">
                            <i class="ph ph-article"></i>
                            <span>리포트</span>
                        </button>
                    </div>

                    <!-- 상세 뷰 콘텐츠 -->
                    <div class="project-detail-content">
                        <!-- 출처 탭 -->
                        <div class="detail-tab-panel active" id="sourcesPanel">
                            <div class="sources-container">
                                <div class="sources-header">
                                    <h3>수집된 출처</h3>
                                    <span class="sources-count">총 3개</span>
                                </div>
                                <div class="sources-list" id="sourcesList">
                                    <!-- 출처 목록이 여기에 표시됩니다 -->
                                </div>
                            </div>
                        </div>

                        <!-- 다이어그램 탭 -->
                        <div class="detail-tab-panel" id="diagramPanel">
                            <div class="diagram-container">
                                <div class="diagram-header">
                                    <h3>어피니티 다이어그램</h3>
                                    <div class="diagram-controls">
                                        <button class="diagram-btn" id="detailZoomInBtn">
                                            <i class="ph ph-plus"></i>
                                        </button>
                                        <button class="diagram-btn" id="detailZoomOutBtn">
                                            <i class="ph ph-minus"></i>
                                        </button>
                                        <button class="diagram-btn" id="detailFitToScreenBtn">
                                            <i class="ph ph-arrows-out"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="diagram-content">
                                    <div class="diagram-viewport">
                                        <img src="images/diagram.png" alt="어피니티 다이어그램" class="diagram-image"
                                            id="detailDiagram">
                                    </div>
                                    <div class="diagram-table-section">
                                        <div class="table-header">
                                            <h4>클러스터 데이터</h4>
                                        </div>
                                        <div class="table-container" id="detailTableContainer">
                                            <!-- 분석 테이블이 여기에 표시됩니다 -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 리포트 탭 -->
                        <div class="detail-tab-panel" id="reportPanel">
                            <div class="report-container">
                                <div class="report-header">
                                    <h3>생성된 리포트</h3>
                                    <div class="report-actions">
                                        <button class="report-action-btn secondary" id="copyReportBtn">
                                            <i class="ph ph-copy"></i>
                                            <span>복사</span>
                                        </button>
                                        <button class="report-action-btn secondary" id="downloadReportBtn">
                                            <i class="ph ph-download-simple"></i>
                                            <span>다운로드</span>
                                        </button>
                                        <button class="report-action-btn primary" id="editReportBtn">
                                            <i class="ph ph-pencil"></i>
                                            <span>편집</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="report-content">
                                    <div class="report-viewer" id="reportViewer">
                                        <!-- 생성된 리포트가 여기에 표시됩니다 -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 분석 리포트 탭 콘텐츠 -->
        <div class="tab-content" id="analysisTab">
            <!-- 좌측 패널: 리포트 메뉴 -->
            <aside class="left-panel">
                <header class="panel-header">
                    <div class="briefing-info">
                        <h1 class="panel-title">분석 리포트</h1>
                        <p class="panel-subtitle">2024년 12월 • 주간 리포트</p>
                    </div>
                    <div class="date-selector">
                        <select id="reportPeriod">
                            <option value="week">주간</option>
                            <option value="month">월간</option>
                            <option value="quarter">분기</option>
                        </select>
                    </div>
                </header>

                <div class="briefing-cards">
                    <div class="report-menu-card active" data-report="overview">
                        <div class="report-menu-header">
                            <h3>개요</h3>
                            <span class="report-menu-badge">신규</span>
                        </div>
                    </div>

                    <div class="report-menu-card" data-report="engagement">
                        <div class="report-menu-header">
                            <h3>참여도</h3>
                            <span class="report-menu-trend up">↑ 12.3%</span>
                        </div>
                    </div>

                    <div class="report-menu-card" data-report="channels">
                        <div class="report-menu-header">
                            <h3>채널</h3>
                            <span class="report-menu-trend down">↓ 2.1%</span>
                        </div>

                    </div>

                    <div class="report-menu-card" data-report="content">
                        <div class="report-menu-header">
                            <h3>콘텐츠</h3>
                            <span class="report-menu-trend up">↑ 8.7%</span>
                        </div>

                    </div>

                    <div class="report-menu-card" data-report="ai">
                        <div class="report-menu-header">
                            <h3>AI 인사이트</h3>
                            <span class="report-menu-badge">추천</span>
                        </div>

                    </div>
                </div>
            </aside>

            <!-- 중앙 패널: 리포트 내용 -->
            <main class="center-panel">
                <div class="main-content">
                    <header class="analysis-header">
                        <div class="analysis-title-area">
                            <h2 class="analysis-title">전체 개요</h2>
                            <p class="analysis-subtitle">2025년 7월 9일 성과 리포트</p>
                        </div>
                        <!--  -->
                    </header>

                    <div class="analysis-content" id="reportContent">
                        <!-- 전체 개요 리포트 -->
                        <div class="report-view active" id="overviewReport">
                            <!-- 주요 지표 카드들 -->
                            <div class="metrics-grid">
                                <div class="metric-card">
                                    <div class="metric-header">
                                        <h3>총 조회수</h3>
                                        <span class="metric-trend up">↑ 15.2%</span>
                                    </div>
                                    <div class="metric-value">42,358</div>
                                    <div class="metric-sub">지난주 대비</div>
                                </div>

                                <div class="metric-card">
                                    <div class="metric-header">
                                        <h3>클릭률</h3>
                                        <span class="metric-trend up">↑ 3.4%</span>
                                    </div>
                                    <div class="metric-value">24.7%</div>
                                    <div class="metric-sub">평균 클릭률</div>
                                </div>

                                <div class="metric-card">
                                    <div class="metric-header">
                                        <h3>구독자 수</h3>
                                        <span class="metric-trend up">↑ 127명</span>
                                    </div>
                                    <div class="metric-value">8,943</div>
                                    <div class="metric-sub">총 구독자</div>
                                </div>

                                <div class="metric-card">
                                    <div class="metric-header">
                                        <h3>참여도</h3>
                                        <span class="metric-trend down">↓ 1.2%</span>
                                    </div>
                                    <div class="metric-value">67.3%</div>
                                    <div class="metric-sub">평균 참여도</div>
                                </div>
                            </div>

                            <!-- 차트 섹션 -->
                            <div class="chart-section">
                                <h3>주간 성과</h3>
                                <div class="chart-container">
                                    <div class="chart-placeholder">
                                        <div class="chart-bars">
                                            <div class="chart-bar" style="height: 60%">
                                                <span class="bar-value">5.2K</span>
                                            </div>
                                            <div class="chart-bar" style="height: 80%">
                                                <span class="bar-value">6.8K</span>
                                            </div>
                                            <div class="chart-bar" style="height: 45%">
                                                <span class="bar-value">4.1K</span>
                                            </div>
                                            <div class="chart-bar" style="height: 95%">
                                                <span class="bar-value">8.3K</span>
                                            </div>
                                            <div class="chart-bar" style="height: 75%">
                                                <span class="bar-value">6.5K</span>
                                            </div>
                                            <div class="chart-bar" style="height: 88%">
                                                <span class="bar-value">7.6K</span>
                                            </div>
                                            <div class="chart-bar" style="height: 70%">
                                                <span class="bar-value">6.1K</span>
                                            </div>
                                        </div>
                                        <div class="chart-labels">
                                            <span>월</span>
                                            <span>화</span>
                                            <span>수</span>
                                            <span>목</span>
                                            <span>금</span>
                                            <span>토</span>
                                            <span>일</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 인기 콘텐츠 -->
                            <div class="popular-content">
                                <h3>이번 주 인기 콘텐츠</h3>
                                <div class="content-list">
                                    <div class="content-item">
                                        <div class="content-rank">1</div>
                                        <div class="content-info">
                                            <div class="content-title">AI 혁명이 가져올 새로운 변화</div>
                                            <div class="content-stats">
                                                <span>조회수 8,432</span>
                                                <span>클릭률 31.2%</span>
                                                <span>공유 247회</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="content-item">
                                        <div class="content-rank">2</div>
                                        <div class="content-info">
                                            <div class="content-title">2024년 주식 시장 전망</div>
                                            <div class="content-stats">
                                                <span>조회수 7,629</span>
                                                <span>클릭률 28.5%</span>
                                                <span>공유 189회</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="content-item">
                                        <div class="content-rank">3</div>
                                        <div class="content-info">
                                            <div class="content-title">부동산 시장 변화의 신호</div>
                                            <div class="content-stats">
                                                <span>조회수 6,845</span>
                                                <span>클릭률 25.7%</span>
                                                <span>공유 156회</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 참여도 분석 리포트 -->
                        <div class="report-view" id="engagementReport">
                            <div class="engagement-overview">

                                <div class="engagement-metrics">
                                    <div class="engagement-metric">
                                        <div class="metric-label">평균 읽기 시간</div>
                                        <div class="metric-value">4분 23초</div>
                                        <div class="metric-change up">↑ 18초</div>
                                    </div>
                                    <div class="engagement-metric">
                                        <div class="metric-label">완독률</div>
                                        <div class="metric-value">67.3%</div>
                                        <div class="metric-change down">↓ 2.1%</div>
                                    </div>
                                    <div class="engagement-metric">
                                        <div class="metric-label">댓글 수</div>
                                        <div class="metric-value">342</div>
                                        <div class="metric-change up">↑ 47</div>
                                    </div>
                                </div>
                            </div>

                            <div class="engagement-heatmap">
                                <h3>시간대별 참여</h3>
                                <div class="heatmap-container">
                                    <div class="heatmap-grid">
                                        <div class="heatmap-cell low">9시</div>
                                        <div class="heatmap-cell medium">10시</div>
                                        <div class="heatmap-cell high">11시</div>
                                        <div class="heatmap-cell medium">12시</div>
                                        <div class="heatmap-cell low">13시</div>
                                        <div class="heatmap-cell medium">14시</div>
                                        <div class="heatmap-cell high">15시</div>
                                        <div class="heatmap-cell medium">16시</div>
                                        <div class="heatmap-cell low">17시</div>
                                        <div class="heatmap-cell high">18시</div>
                                        <div class="heatmap-cell very-high">19시</div>
                                        <div class="heatmap-cell high">20시</div>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <!-- 채널 분석 리포트 -->
                        <div class="report-view" id="channelsReport">
                            <div class="channels-overview">

                                <div class="channels-list">
                                    <div class="channel-item">
                                        <div class="channel-info">
                                            <div class="channel-name">📧 이메일</div>
                                            <div class="channel-stats">구독자 5,234명</div>
                                        </div>
                                        <div class="channel-metrics">
                                            <div class="channel-metric">
                                                <span class="metric-label">오픈율</span>
                                                <span class="metric-value">42.3%</span>
                                            </div>
                                            <div class="channel-metric">
                                                <span class="metric-label">클릭률</span>
                                                <span class="metric-value">12.7%</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="channel-item">
                                        <div class="channel-info">
                                            <div class="channel-name">🐦 X (Twitter)</div>
                                            <div class="channel-stats">팔로워 2,847명</div>
                                        </div>
                                        <div class="channel-metrics">
                                            <div class="channel-metric">
                                                <span class="metric-label">도달률</span>
                                                <span class="metric-value">8.4%</span>
                                            </div>
                                            <div class="channel-metric">
                                                <span class="metric-label">참여율</span>
                                                <span class="metric-value">3.2%</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="channel-item">
                                        <div class="channel-info">
                                            <div class="channel-name">📱 카카오톡</div>
                                            <div class="channel-stats">구독자 1,562명</div>
                                        </div>
                                        <div class="channel-metrics">
                                            <div class="channel-metric">
                                                <span class="metric-label">열람률</span>
                                                <span class="metric-value">78.9%</span>
                                            </div>
                                            <div class="channel-metric">
                                                <span class="metric-label">클릭률</span>
                                                <span class="metric-value">23.4%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 콘텐츠 분석 리포트 -->
                        <div class="report-view" id="contentReport">
                            <div class="content-analysis">

                                <div class="topic-performance">
                                    <div class="topic-item">
                                        <div class="topic-info">
                                            <div class="topic-name">AI & 기술</div>
                                            <div class="topic-count">15개 게시물</div>
                                        </div>
                                        <div class="topic-metrics">
                                            <div class="topic-bar">
                                                <div class="topic-fill" style="width: 85%"></div>
                                            </div>
                                            <span class="topic-score">85%</span>
                                        </div>
                                    </div>

                                    <div class="topic-item">
                                        <div class="topic-info">
                                            <div class="topic-name">경제 & 투자</div>
                                            <div class="topic-count">12개 게시물</div>
                                        </div>
                                        <div class="topic-metrics">
                                            <div class="topic-bar">
                                                <div class="topic-fill" style="width: 72%"></div>
                                            </div>
                                            <span class="topic-score">72%</span>
                                        </div>
                                    </div>

                                    <div class="topic-item">
                                        <div class="topic-info">
                                            <div class="topic-name">정치 & 사회</div>
                                            <div class="topic-count">8개 게시물</div>
                                        </div>
                                        <div class="topic-metrics">
                                            <div class="topic-bar">
                                                <div class="topic-fill" style="width: 58%"></div>
                                            </div>
                                            <span class="topic-score">58%</span>
                                        </div>
                                    </div>

                                    <div class="topic-item">
                                        <div class="topic-info">
                                            <div class="topic-name">문화 & 라이프</div>
                                            <div class="topic-count">6개 게시물</div>
                                        </div>
                                        <div class="topic-metrics">
                                            <div class="topic-bar">
                                                <div class="topic-fill" style="width: 44%"></div>
                                            </div>
                                            <span class="topic-score">44%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- AI 인사이트 리포트 -->
                        <div class="report-view" id="aiReport">
                            <div class="ai-insights">
                                <div class="insight-cards">
                                    <div class="insight-card">
                                        <div class="insight-type">📈 성과 개선</div>
                                        <div class="insight-title">AI 관련 콘텐츠 확대 권장</div>
                                        <div class="insight-desc">AI 주제 콘텐츠의 참여도가 평균 대비 47% 높습니다. 해당 주제의 콘텐츠 비중을 늘리면 전체
                                            성과 향상이 예상됩니다.</div>
                                        <div class="insight-score">신뢰도 92%</div>
                                    </div>

                                    <div class="insight-card">
                                        <div class="insight-type">⏰ 최적 시간</div>
                                        <div class="insight-title">발송 시간 조정 제안</div>
                                        <div class="insight-desc">오후 7시 발송 시 오픈율이 23% 증가합니다. 현재 오전 9시 발송보다 더 높은 참여도를 기대할
                                            수 있습니다.</div>
                                        <div class="insight-score">신뢰도 87%</div>
                                    </div>

                                    <div class="insight-card">
                                        <div class="insight-type">🎯 타겟팅</div>
                                        <div class="insight-title">구독자 세분화 필요</div>
                                        <div class="insight-desc">경제 콘텐츠에 높은 관심을 보이는 구독자 그룹을 별도로 관리하면 맞춤형 콘텐츠 제공이 가능합니다.
                                        </div>
                                        <div class="insight-score">신뢰도 79%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- 설정 탭 콘텐츠 -->
        <div class="tab-content settings-tab" id="settingsTab">
            <div class="settings-container">


                <div class="settings-content">
                    <!-- 팔로우 관리 섹션 -->


                    <!-- 알림 섹션 -->
                    <section class="settings-section">
                        <h2 class="section-title">알림</h2>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">브리핑 알림</div>
                                <div class="setting-description">매일 아침 새로운 브리핑이 준비되면 알림을 받습니다.</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">키워드 알림</div>
                                <div class="setting-description">등록한 키워드 관련 새로운 이슈가 발견되면 알림을 받습니다.</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">이메일 요약</div>
                                <div class="setting-description">주간 분석 리포트를 이메일로 받습니다.</div>
                            </div>
                            <div class="setting-control">
                                <label class="toggle-switch">
                                    <input type="checkbox">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </section>

                    <!-- 계정 섹션 -->
                    <section class="settings-section">
                        <h2 class="section-title">계정</h2>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">프로필</div>
                                <div class="setting-description">계정 정보를 관리합니다.</div>
                            </div>
                            <div class="setting-control">
                                <button class="setting-button">수정</button>
                            </div>
                        </div>



                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">구독</div>
                                <div class="setting-description">현재 프로 플랜 이용 중입니다.</div>
                            </div>
                            <div class="setting-control">
                                <button class="setting-button">관리</button>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>

        <!-- 구독 탭 콘텐츠 -->
        <div class="tab-content" id="subscriptionTab">
            <!-- 구독은 비워둡니다 -->
        </div>

        <!-- 스크랩 탭 콘텐츠 -->
        <div class="tab-content" id="bookmarksTab">
            <!-- 스크랩은 비워둡니다 -->
        </div>
    </div>

    <!-- 기사 리더 모달 -->
    <div class="modal-overlay" id="readerModal">
        <div class="reader-modal">
            <header class="reader-header">
                <div class="reader-header-left">
                    <div class="reader-source" id="readerSource">출처</div>
                    <a href="#" class="reader-original-link" id="readerOriginalLink">
                        <i class="ph ph-arrow-square-out"></i>
                        원문 보기
                    </a>
                </div>
                <button class="reader-close" id="readerClose">✕</button>
            </header>
            <div class="reader-content">
                <div class="reader-article">
                    <h1 class="reader-title" id="readerTitle">기사 제목</h1>
                    <div class="reader-meta" id="readerMeta">
                        <span class="reader-date">2024.12.19</span>
                        <span class="reader-author">기자명</span>
                    </div>
                    <div class="reader-body" id="readerBody">
                        <p>기사 내용이 여기에 표시됩니다...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 하이라이트 메뉴 -->
    <div class="highlight-menu" id="highlightMenu">
        <button class="highlight-btn" data-category="issues" title="쟁점과 현안">
            <i class="ph ph-bookmark-simple" style="color: #FF3B30;"></i>
        </button>
        <button class="highlight-btn" data-category="deep" title="더 깊게 읽기">
            <i class="ph ph-bookmark-simple" style="color: #007AFF;"></i>
        </button>
        <button class="highlight-btn" data-category="different" title="다르게 읽기">
            <i class="ph ph-bookmark-simple" style="color: #34C759;"></i>
        </button>
        <button class="highlight-btn" data-category="tmi" title="오늘의 TMI">
            <i class="ph ph-bookmark-simple" style="color: #8E8E93;"></i>
        </button>
    </div>

    <!-- 툴팁 -->
    <div class="tooltip" id="tooltip"></div>

    <!-- JavaScript - 순서대로 로드 -->
    <script src="scripts/data.js"></script>
    <script src="scripts/components.js"></script>
    <script src="scripts/interactions.js"></script>
    <script src="scripts/main.js"></script>

    <script>
        // 탭 전환 기능
        function initializeTabs() {
            const menuItems = document.querySelectorAll('.menu-item, .settings-button');
            const tabContents = document.querySelectorAll('.tab-content');

            menuItems.forEach(item => {
                item.addEventListener('click', () => {
                    const tabName = item.dataset.tab;

                    // 메뉴 항목 활성화 상태 변경
                    document.querySelectorAll('.menu-item').forEach(menu => menu.classList.remove('active'));

                    if (item.classList.contains('menu-item')) {
                        item.classList.add('active');
                    }

                    // 탭 콘텐츠 표시/숨김
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                    });

                    const targetTab = document.getElementById(tabName + 'Tab');
                    if (targetTab) {
                        targetTab.classList.add('active');

                        // 홈 탭 활성화 시 홈 탭 기능 초기화
                        if (tabName === 'home') {
                            initializeHomeTab();
                        }

                        // 브리핑 탭 활성화 시 브리핑 탭 기능 초기화
                        if (tabName === 'briefing') {
                            initializeBriefingTabs();
                        }

                        // 설정 탭 활성화 시 설정 기능 초기화
                        if (tabName === 'settings') {
                            initializeSettings();
                        }

                        // 프로젝트 탭 활성화 시 프로젝트 기능 초기화
                        if (tabName === 'projects') {
                            initializeProjects();
                        }

                        // 분석 리포트 탭 활성화 시 분석 리포트 기능 초기화
                        if (tabName === 'analysis') {
                            initializeAnalysisReport();
                        }

                        // 도움말 탭 활성화 시 도움말 기능 초기화
                        if (tabName === 'help') {
                            initializeHelp();
                        }
                    }
                });
            });
        }

        // 브리핑 탭 기능 초기화
        function initializeBriefingTabs() {
            console.log('🔄 브리핑 탭 기능 초기화');

            const briefingTabBtns = document.querySelectorAll('.briefing-tab-btn');
            const briefingTabPanels = document.querySelectorAll('.briefing-tab-panel');

            briefingTabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabName = btn.dataset.briefingTab;
                    console.log('브리핑 탭 전환:', tabName);

                    // 탭 버튼 활성화 상태 변경
                    briefingTabBtns.forEach(tab => tab.classList.remove('active'));
                    btn.classList.add('active');

                    // 탭 패널 표시/숨김
                    briefingTabPanels.forEach(panel => {
                        panel.classList.remove('active');
                    });

                    const targetPanel = document.getElementById(tabName + 'Panel');
                    if (targetPanel) {
                        targetPanel.classList.add('active');
                    }
                });
            });

            // 다음 버튼 기능
            const nextStepBtn = document.getElementById('nextStepBtn');
            if (nextStepBtn) {
                nextStepBtn.addEventListener('click', function () {
                    console.log('다음 단계로 이동');

                    // 2단계 탭으로 전환
                    const analysisTabBtn = document.querySelector('[data-briefing-tab="analysis"]');
                    if (analysisTabBtn) {
                        analysisTabBtn.click();
                    }
                });
            }

            // URL 입력 기능
            const urlSubmitBtn = document.getElementById('urlSubmitBtn');
            const urlInput = document.getElementById('urlInput');

            if (urlSubmitBtn && urlInput) {
                urlSubmitBtn.addEventListener('click', function () {
                    const url = urlInput.value.trim();
                    if (url) {
                        console.log('URL 입력됨:', url);
                        // 실제로는 URL을 처리하는 로직을 추가
                        alert('URL이 추가되었습니다: ' + url);
                        urlInput.value = '';
                    }
                });

                // Enter 키로도 URL 입력 가능
                urlInput.addEventListener('keypress', function (e) {
                    if (e.key === 'Enter') {
                        urlSubmitBtn.click();
                    }
                });
            }

            // 파일 입력 기능
            const fileInput = document.getElementById('fileInput');
            if (fileInput) {
                fileInput.addEventListener('change', function (e) {
                    const files = e.target.files;
                    if (files.length > 0) {
                        console.log('파일 선택됨:', files);
                        const fileNames = Array.from(files).map(file => file.name).join(', ');
                        alert('파일이 선택되었습니다: ' + fileNames);
                    }
                });
            }

            // 상세 분석 탭 기능 초기화
            initializeAnalysisTab();

            console.log('✅ 브리핑 탭 기능 초기화 완료');
        }

        // 상세 분석 탭 기능 초기화
        function initializeAnalysisTab() {
            console.log('🔬 상세 분석 탭 기능 초기화');

            // 다이어그램 컨트롤 버튼들
            const zoomInBtn = document.getElementById('zoomInBtn');
            const zoomOutBtn = document.getElementById('zoomOutBtn');
            const fitToScreenBtn = document.getElementById('fitToScreenBtn');
            const mainDiagram = document.getElementById('mainDiagram');

            if (zoomInBtn) {
                zoomInBtn.addEventListener('click', function () {
                    console.log('다이어그램 확대');
                    // 실제 줌 기능은 이미지로 대체하므로 로그만 출력
                });
            }

            if (zoomOutBtn) {
                zoomOutBtn.addEventListener('click', function () {
                    console.log('다이어그램 축소');
                });
            }

            if (fitToScreenBtn) {
                fitToScreenBtn.addEventListener('click', function () {
                    console.log('화면에 맞춤');
                });
            }

            // 클러스터 핫스팟 이벤트
            const clusterHotspots = document.querySelectorAll('.cluster-hotspot');
            clusterHotspots.forEach(hotspot => {
                hotspot.addEventListener('click', function () {
                    const clusterId = this.dataset.cluster;
                    console.log(`클러스터 ${clusterId} 클릭됨`);
                    selectCluster(clusterId);
                });
            });

            // 테이블 기능
            const addRowBtn = document.getElementById('addRowBtn');
            const exportTableBtn = document.getElementById('exportTableBtn');

            if (addRowBtn) {
                addRowBtn.addEventListener('click', function () {
                    addTableRow();
                });
            }

            if (exportTableBtn) {
                exportTableBtn.addEventListener('click', function () {
                    exportTable();
                });
            }

            // 테이블 편집 기능
            initializeTableEditing();

            // 분석 액션 버튼 기능
            initializeAnalysisActions();

            console.log('✅ 상세 분석 탭 기능 초기화 완료');
        }

        // 분석 액션 버튼 기능 초기화
        function initializeAnalysisActions() {
            const viewSourcesBtn = document.getElementById('viewSourcesBtn');
            const addCommentBtn = document.getElementById('addCommentBtn');

            if (viewSourcesBtn) {
                viewSourcesBtn.addEventListener('click', function () {
                    console.log('출처 보기 클릭됨');
                    showSourcesModal();
                });
            }

            if (addCommentBtn) {
                addCommentBtn.addEventListener('click', function () {
                    console.log('코멘트 추가 클릭됨');
                    showCommentModal();
                });
            }
        }

        // 출처 모달 표시
        function showSourcesModal() {
            // 현재 선택된 클러스터의 출처 정보 표시
            const selectedRow = document.querySelector('.editable-row.selected');
            if (!selectedRow) {
                alert('클러스터를 먼저 선택해주세요.');
                return;
            }

            const clusterName = selectedRow.cells[0].textContent;
            const keywords = selectedRow.cells[6].textContent; // 키워드 컬럼

            const sourcesInfo = `
클러스터: ${clusterName}

연관 키워드: ${keywords}

주요 출처:
• Bloomberg Terminal
• Reuters Eikon
• Fed 공식 발표자료
• 한국은행 경제통계시스템
• 금융감독원 전자공시시스템
• 여신금융협회 통계시스템

관련 지표:
• 실시간 시장 데이터 (DXY, VIX, 국채수익률)
• 경제 지표 발표 일정 (CPI, PPI, FOMC)
• 중앙은행 정책 발표 (Fed, ECB, BOJ)
• 기업 실적 발표 (S&P500, KOSPI)

데이터 업데이트: 실시간
신뢰도 점수: 94%
            `.trim();

            alert(sourcesInfo);
        }

        // 코멘트 모달 표시
        function showCommentModal() {
            const selectedRow = document.querySelector('.editable-row.selected');
            if (!selectedRow) {
                alert('클러스터를 먼저 선택해주세요.');
                return;
            }

            const clusterName = selectedRow.cells[0].textContent;
            const comment = prompt(`${clusterName}에 대한 코멘트를 입력하세요:`, '');

            if (comment && comment.trim()) {
                console.log(`코멘트 저장됨: ${comment}`);
                // 실제로는 서버에 저장하거나 로컬 스토리지에 저장
                alert(`코멘트가 저장되었습니다:\n"${comment}"`);
            }
        }

        // 클러스터 선택 함수
        function selectCluster(clusterId) {
            console.log(`클러스터 ${clusterId} 선택됨`);

            // 테이블 행 하이라이트
            const tableRows = document.querySelectorAll('.editable-row');
            tableRows.forEach(row => {
                row.classList.remove('selected');
                if (row.dataset.cluster === clusterId) {
                    row.classList.add('selected');
                }
            });

            // 사이드바 상태 전환 및 정보 업데이트
            updateSidebarInfo(clusterId);
        }

        // 사이드바 정보 업데이트
        function updateSidebarInfo(clusterId) {
            const clusterTitles = {
                '1': '기준금리 인상 우려',
                '2': '테크주 밸류에이션 부담',
                '3': '중국 경제 둔화 심화',
                '4': '지정학적 리스크 고조',
                '5': '인플레이션 재가속 위험',
                '6': '달러 강세 지속',
                '7': '반도체 업계 하향 조정',
                '8': '부동산 시장 침체',
                '9': '공급망 차질 재발',
                '10': '에너지 가격 변동성'
            };

            // 빈 상태와 내용 상태 전환
            const emptyState = document.getElementById('analysisEmptyState');
            const contentState = document.getElementById('analysisContentState');

            if (clusterId && clusterTitles[clusterId]) {
                // 클러스터가 선택된 경우: 빈 상태 숨기고 내용 상태 표시
                if (emptyState) emptyState.style.display = 'none';
                if (contentState) contentState.style.display = 'block';

                // 제목 업데이트
                const analysisTitle = document.getElementById('analysisTitle');
                if (analysisTitle) {
                    analysisTitle.textContent = `${clusterTitles[clusterId]}`;
                }

                // 주요 원인 태그들 업데이트
                updateMainCauseTags(clusterId);

                // 근본원인/잠재원인 업데이트
                updateCausesList(clusterId);
            } else {
                // 클러스터가 선택되지 않은 경우: 빈 상태 표시
                if (emptyState) emptyState.style.display = 'block';
                if (contentState) contentState.style.display = 'none';
            }
        }

        // 주요 원인 태그들 업데이트
        function updateMainCauseTags(clusterId) {
            const mainCauseTags = {
                '1': ['양적긴축 정책', '테이퍼링 가속화', '유동성 경색'],
                '2': ['PER 과대평가', 'AI 버블 우려', '실적 하향 조정'],
                '3': ['제로코로나 정책', '부동산 위기', '수출 둔화'],
                '4': ['전쟁 장기화', '안전자산 선호', '유가 급등'],
                '5': ['근원물가 상승', '임금 인플레이션', '서비스물가 강세'],
                '6': ['금리차 확대', '신흥국 자본유출', '원자재 부담'],
                '7': ['메모리 사이클 역전', '중국 수요 둔화', '재고 조정'],
                '8': ['금리 부담 가중', '규제 정책 강화', '거래량 급감'],
                '9': ['물류비 급등', '원자재 공급차질', '제조업 타격'],
                '10': ['OPEC+ 감산', '재생에너지 전환', '계절적 수요 변화']
            };

            const mainCauseTagsContainer = document.getElementById('mainCauseTags');
            if (mainCauseTagsContainer) {
                mainCauseTagsContainer.innerHTML = mainCauseTags[clusterId]?.map(tag =>
                    `<span class="cause-tag primary">${tag}</span>`
                ).join('') || '';
            }
        }

        // 원인 리스트 업데이트
        function updateCausesList(clusterId) {
            const causesList = document.getElementById('causesList');

            const causesData = {
                '1': [
                    {
                        text: 'Fed의 공격적 통화정책 스탠스 지속',
                        type: 'multi',
                        sources: [
                            { icon: 'sources/naver.png', title: '네이버 뉴스' },
                            { icon: 'sources/google.png', title: '구글 뉴스' },
                            { icon: 'sources/x.png', title: 'X (Twitter)' },
                            { icon: 'sources/facebook.png', title: '페이스북' }
                        ],
                        count: '4개 소스',
                        desc: '다른 관점으로 분석'
                    },
                    {
                        text: '인플레이션 억제를 위한 터미널 금리 상향 조정',
                        type: 'additional',
                        sources: [
                            { icon: 'sources/facebook.png', title: '페이스북' },
                            { icon: 'sources/naver.png', title: '네이버 뉴스' },
                            { icon: 'sources/google.png', title: '구글 뉴스' }
                        ],
                        count: '3개 자료',
                        desc: '추가 참고 자료'
                    },
                    {
                        text: '장기 채권 수익률 곡선 역전 해소 시점 관찰',
                        type: 'multi',
                        sources: [
                            { icon: 'sources/x.png', title: 'X (Twitter)' },
                            { icon: 'sources/google.png', title: '구글 뉴스' }
                        ],
                        count: '2개 소스',
                        desc: '다른 관점으로 분석'
                    },
                    {
                        text: '연준 점도표와 경제 데이터 모니터링',
                        type: 'additional',
                        sources: [
                            { icon: 'sources/naver.png', title: '네이버 뉴스' },
                            { icon: 'sources/facebook.png', title: '페이스북' }
                        ],
                        count: '5개 자료',
                        desc: '추가 참고 자료'
                    }
                ],
                '2': [
                    {
                        text: '생성형 AI 열풍에 따른 비이성적 투자심리',
                        type: 'multi',
                        sources: [
                            { icon: 'sources/google.png', title: '구글 뉴스' },
                            { icon: 'sources/x.png', title: 'X (Twitter)' }
                        ],
                        count: '3개 소스',
                        desc: '다른 관점으로 분석'
                    },
                    {
                        text: '실적 대비 과도한 밸류에이션 프리미엄',
                        type: 'additional',
                        sources: [
                            { icon: 'sources/naver.png', title: '네이버 뉴스' },
                            { icon: 'sources/facebook.png', title: '페이스북' }
                        ],
                        count: '2개 자료',
                        desc: '추가 참고 자료'
                    }
                ]
            };

            if (causesList && causesData[clusterId]) {
                causesList.innerHTML = causesData[clusterId].map(cause => {
                    const visibleSources = cause.sources.slice(0, 3);
                    const moreCount = cause.sources.length > 3 ? cause.sources.length - 3 : 0;

                    return `
                        <div class="cause-item ${cause.type}-perspective" data-type="${cause.type}">
                            <div class="cause-content">
                                <div class="cause-indicator">
                                    <i class="ph ph-arrow-right"></i>
                                </div>
                                <span class="cause-text">${cause.text}</span>
                            </div>
                            <div class="cause-sources">
                                <div class="source-info ${cause.type}">
                                    <span class="source-count">${cause.count}</span>
                                    <span class="source-desc">${cause.desc}</span>
                                </div>
                                <div class="source-icons">
                                    ${visibleSources.map(source =>
                        `<img src="${source.icon}" alt="${source.title}" class="source-icon" title="${source.title}">`
                    ).join('')}
                                    ${moreCount > 0 ? `<span class="more-sources">+${moreCount}</span>` : ''}
                                </div>
                                <button class="view-sources-btn" title="원본 보기" data-cluster-id="${clusterId}" data-cause-text="${cause.text}">
                                    <i class="ph ph-arrow-square-out"></i>
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            } else if (causesList) {
                causesList.innerHTML = '';
            }

            // 출처 보기 버튼 이벤트 리스너 추가
            initializeViewSourcesButtons();
        }

        // 출처 보기 버튼 이벤트 리스너 초기화
        function initializeViewSourcesButtons() {
            const viewSourcesButtons = document.querySelectorAll('.view-sources-btn');
            viewSourcesButtons.forEach(button => {
                button.addEventListener('click', function (e) {
                    e.preventDefault();
                    e.stopPropagation();

                    const clusterId = this.dataset.clusterId;
                    const causeText = this.dataset.causeText;

                    showViewSourcesModal(clusterId, causeText);
                });
            });
        }

        // AI 딥 리서치 버튼 기능 초기화
        function initializeAIResearchButton() {
            const aiResearchBtn = document.getElementById('aiResearchBtn');
            if (aiResearchBtn) {
                aiResearchBtn.addEventListener('click', function () {
                    const selectedRow = document.querySelector('.editable-row.selected');
                    if (!selectedRow) {
                        alert('클러스터를 먼저 선택해주세요.');
                        return;
                    }

                    const clusterName = selectedRow.cells[0].textContent;
                    showAIResearchModal(clusterName);
                });
            }
        }

        // 출처 보기 모달 표시
        function showViewSourcesModal(clusterId, causeText) {
            const clusterTitles = {
                '1': '기준금리 인상 우려',
                '2': '테크주 밸류에이션 부담',
                '3': '중국 경제 둔화 심화',
                '4': '지정학적 리스크 고조',
                '5': '인플레이션 재가속 위험',
                '6': '달러 강세 지속',
                '7': '반도체 업계 하향 조정',
                '8': '부동산 시장 침체',
                '9': '공급망 차질 재발',
                '10': '에너지 가격 변동성'
            };

            const sourceMappings = {
                'Fed의 공격적 통화정책 스탠스 지속': {
                    sources: [
                        { name: '네이버 뉴스', perspective: '한국 경제에 미치는 영향 관점', url: 'https://news.naver.com/example1' },
                        { name: '구글 뉴스', perspective: '글로벌 시장 분석 관점', url: 'https://news.google.com/example1' },
                        { name: 'X (Twitter)', perspective: '실시간 시장 반응 관점', url: 'https://x.com/example1' },
                        { name: '페이스북', perspective: '투자 커뮤니티 관점', url: 'https://facebook.com/example1' }
                    ]
                },
                '인플레이션 억제를 위한 터미널 금리 상향 조정': {
                    sources: [
                        { name: '페이스북', perspective: 'Fed 정책 브리핑 자료', url: 'https://facebook.com/example2' },
                        { name: '네이버 뉴스', perspective: 'FOMC 의사록 분석', url: 'https://news.naver.com/example2' },
                        { name: '구글 뉴스', perspective: '경제 전문가 해설', url: 'https://news.google.com/example2' }
                    ]
                }
            };

            const clusterTitle = clusterTitles[clusterId] || '알 수 없는 클러스터';
            const sourceData = sourceMappings[causeText];

            if (sourceData) {
                const sourcesInfo = `
🎯 ${clusterTitle}
📝 원인: ${causeText}

📊 출처별 관점 분석:
${sourceData.sources.map((source, index) =>
                    `${index + 1}. ${source.name}
   관점: ${source.perspective}
   링크: ${source.url}`
                ).join('\n\n')}

📈 신뢰도 점수: 96%
⏰ 마지막 업데이트: 2024.12.19 15:30
🔍 총 ${sourceData.sources.length}개 출처에서 수집
                `.trim();

                alert(sourcesInfo);
            } else {
                const defaultInfo = `
🎯 ${clusterTitle}
📝 원인: ${causeText}

📊 분석 정보:
• 해당 원인에 대한 상세 출처 정보를 준비 중입니다.
• AI 딥 리서치를 통해 더 자세한 분석을 받아보세요.

📈 기본 신뢰도: 90%
⏰ 업데이트: 2024.12.19
                `.trim();

                alert(defaultInfo);
            }
        }

        // AI 딥 리서치 모달 표시
        function showAIResearchModal(clusterName) {
            const researchInfo = `
🤖 AI 딥 리서치 시작

🎯 선택된 클러스터: ${clusterName}

🔍 분석 진행 단계:
1. ✅ 기본 데이터 수집 완료
2. 🔄 고급 패턴 분석 진행 중...
3. ⏳ 예측 모델 적용 대기
4. ⏳ 인사이트 생성 대기

💡 예상 소요 시간: 3-5분

AI가 다음 요소들을 종합 분석합니다:
• 소셜 미디어 센티먼트 분석
• 경제 지표 상관관계 분석  
• 과거 유사 사례 패턴 매칭
• 전문가 의견 크로스 검증
• 글로벌 뉴스 임팩트 분석

📊 분석 완료 시 알림을 보내드립니다.
계속 진행하시겠습니까?
            `.trim();

            if (confirm(researchInfo)) {
                // AI 딥 리서치 시뮬레이션
                const aiBtn = document.getElementById('aiResearchBtn');
                const originalText = aiBtn.innerHTML;

                aiBtn.innerHTML = '<i class="ph ph-spinner"></i><span>분석 중...</span>';
                aiBtn.disabled = true;

                setTimeout(() => {
                    aiBtn.innerHTML = originalText;
                    aiBtn.disabled = false;

                    const results = `
🤖 AI 딥 리서치 완료!

🎯 클러스터: ${clusterName}

📊 핵심 발견사항:
• 소셜 미디어 언급량 +47% 증가 (지난 주 대비)
• 전문가 부정적 견해 74% (긍정 18%, 중립 8%)
• 유사 패턴 발생 시기: 2008년 금융위기, 2020년 팬데믹

🎯 리스크 레벨: 높음 (85/100)

💡 AI 추천 액션:
1. 포트폴리오 방어적 조정 권장
2. 현금 비중 15-20% 확대 고려
3. 향후 2-4주간 집중 모니터링 필요

📈 예측 신뢰도: 91%
⚡ 분석 완료 시간: ${new Date().toLocaleString()}
                    `.trim();

                    alert(results);
                }, 3000);
            }
        }

        // 테이블 행 추가
        function addTableRow() {
            const tableBody = document.querySelector('#analysisTable tbody');
            if (!tableBody) return;

            const newRowNumber = tableBody.children.length + 1;
            const newRow = document.createElement('tr');
            newRow.className = 'editable-row';
            newRow.dataset.cluster = newRowNumber.toString();

            newRow.innerHTML = `
                <td contenteditable="true">새로운 클러스터 ${newRowNumber}</td>
                <td contenteditable="true">기타</td>
                <td contenteditable="true">5</td>
                <td>
                    <select class="importance-select">
                        <option value="높음">높음</option>
                        <option value="중간" selected>중간</option>
                        <option value="낮음">낮음</option>
                    </select>
                </td>
                <td contenteditable="true">클러스터 대표 텍스트를 입력하세요...</td>
                <td contenteditable="true">소</td>
                <td contenteditable="true">데이터 소스를 입력하세요...</td>
                <td>
                    <div class="row-actions">
                        <button class="action-btn edit" title="편집">
                            <i class="ph ph-pencil"></i>
                        </button>
                        <button class="action-btn delete" title="삭제">
                            <i class="ph ph-trash"></i>
                        </button>
                    </div>
                </td>
            `;

            tableBody.appendChild(newRow);

            // 새 행에 이벤트 리스너 추가
            initializeRowEvents(newRow);

            console.log('새 테이블 행 추가됨');
        }

        // 테이블 내보내기
        function exportTable() {
            console.log('테이블 내보내기 시작');

            const button = document.getElementById('exportTableBtn');
            const originalText = button.innerHTML;

            button.innerHTML = '<i class="ph ph-spinner"></i> 내보내는 중...';
            button.disabled = true;

            setTimeout(() => {
                button.innerHTML = originalText;
                button.disabled = false;
                console.log('테이블 내보내기 완료');
            }, 2000);
        }

        // 테이블 편집 기능 초기화
        function initializeTableEditing() {
            const tableRows = document.querySelectorAll('.editable-row');
            tableRows.forEach(row => {
                initializeRowEvents(row);
            });
        }

        // 행별 이벤트 초기화
        function initializeRowEvents(row) {
            const editBtn = row.querySelector('.action-btn.edit');
            const deleteBtn = row.querySelector('.action-btn.delete');

            if (editBtn) {
                editBtn.addEventListener('click', function () {
                    const cells = row.querySelectorAll('td[contenteditable]');
                    cells[0].focus();
                });
            }

            if (deleteBtn) {
                deleteBtn.addEventListener('click', function () {
                    if (confirm('이 행을 삭제하시겠습니까?')) {
                        row.remove();
                        console.log('테이블 행 삭제됨');
                    }
                });
            }

            // contenteditable 셀 이벤트
            const editableCells = row.querySelectorAll('td[contenteditable]');
            editableCells.forEach(cell => {
                cell.addEventListener('input', function () {
                    console.log('셀 내용 변경됨:', this.textContent);
                    // 실제로는 다이어그램 업데이트 로직이 들어갈 예정
                });
            });

            // 중요도 선택 이벤트
            const importanceSelect = row.querySelector('.importance-select');
            if (importanceSelect) {
                importanceSelect.addEventListener('change', function () {
                    console.log('중요도 변경됨:', this.value);
                });
            }
        }

        // 프로필 드롭다운 초기화
        function initializeProfileDropdown() {
            const profileButton = document.getElementById('profileButton');
            const profileDropdown = document.getElementById('profileDropdown');
            const accountManageBtn = document.getElementById('accountManageBtn');
            const logoutBtn = document.getElementById('logoutBtn');

            console.log('🔍 프로필 요소 확인:', {
                profileButton: !!profileButton,
                profileDropdown: !!profileDropdown,
                accountManageBtn: !!accountManageBtn,
                logoutBtn: !!logoutBtn
            });

            if (profileButton && profileDropdown) {
                // 프로필 버튼 클릭시 드롭다운 토글
                profileButton.addEventListener('click', function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('프로필 버튼 클릭됨');

                    const isOpen = profileDropdown.classList.contains('open');

                    if (isOpen) {
                        profileDropdown.classList.remove('open');
                        profileButton.classList.remove('active');
                        console.log('드롭다운 닫힘');
                    } else {
                        profileDropdown.classList.add('open');
                        profileButton.classList.add('active');
                        console.log('드롭다운 열림');
                    }
                });

                // 외부 클릭시 드롭다운 닫기
                document.addEventListener('click', function () {
                    profileDropdown.classList.remove('open');
                    profileButton.classList.remove('active');
                });

                // 드롭다운 내부 클릭시 이벤트 전파 방지
                profileDropdown.addEventListener('click', function (e) {
                    e.stopPropagation();
                });

                console.log('✅ 프로필 드롭다운 이벤트 리스너 설정 완료');
            } else {
                console.error('❌ 프로필 요소를 찾을 수 없습니다');
            }

            // 계정 관리 버튼
            if (accountManageBtn) {
                accountManageBtn.addEventListener('click', function () {
                    console.log('계정 관리 클릭됨');
                    alert('계정 관리 기능 준비 중입니다');
                    // 드롭다운 닫기
                    profileDropdown.classList.remove('open');
                    profileButton.classList.remove('active');
                });
            }

            // 로그아웃 버튼
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function () {
                    console.log('로그아웃 클릭됨');
                    if (confirm('정말 로그아웃하시겠습니까?')) {
                        alert('로그아웃되었습니다');
                        localStorage.clear();
                    }
                    // 드롭다운 닫기
                    profileDropdown.classList.remove('open');
                    profileButton.classList.remove('active');
                });
            }
        }

        // 설정 기능 초기화
        function initializeSettings() {
            console.log('🔧 설정 탭 기능 초기화');

            // 팔로우 관리 기능
            initializeFollowManagement();

            // 결제/구독 관리 기능
            initializeBillingActions();

            // 알림 설정 기능
            initializeNotificationSettings();

            // 계정 관리 기능
            initializeAccountActions();
        }

        // 팔로우 관리 기능
        function initializeFollowManagement() {
            // 통계 카드 관리 버튼들
            const statActions = document.querySelectorAll('.settings-tab .stat-action');
            statActions.forEach(btn => {
                btn.addEventListener('click', function () {
                    const statCard = btn.closest('.stat-card');
                    const label = statCard.querySelector('.stat-label').textContent;
                    alert(`${label} 관리 기능 준비 중입니다`);
                });
            });

            // 키워드 태그 추가 기능
            const tagAddBtn = document.querySelector('.settings-tab .tag-add-btn');
            if (tagAddBtn) {
                tagAddBtn.addEventListener('click', function () {
                    const keyword = prompt('추가할 키워드를 입력하세요:');
                    if (keyword && keyword.trim()) {
                        addKeywordTag(keyword.trim());
                        updateFollowCount('키워드');
                    }
                });
            }

            // 계정 추가 기능
            const accountAddBtn = document.querySelector('.settings-tab .account-add-btn');
            if (accountAddBtn) {
                accountAddBtn.addEventListener('click', function () {
                    const accountUrl = prompt('SNS 계정 URL을 입력하세요:');
                    if (accountUrl && accountUrl.trim()) {
                        if (isValidUrl(accountUrl.trim())) {
                            addSNSAccount(accountUrl.trim());
                            updateFollowCount('SNS 계정');
                        }
                    }
                });
            }

            // 채널 추가 기능
            const channelAddBtn = document.querySelector('.settings-tab .channel-add-btn');
            if (channelAddBtn) {
                channelAddBtn.addEventListener('click', function () {
                    const channelUrl = prompt('채널 URL을 입력하세요:');
                    if (channelUrl && channelUrl.trim()) {
                        if (isValidUrl(channelUrl.trim())) {
                            addChannel(channelUrl.trim());
                            updateFollowCount('채널');
                        }
                    }
                });
            }

            // URL 빠른 추가 기능
            const urlInput = document.getElementById('urlInput');
            const urlAddBtn = document.getElementById('urlAddBtn');

            if (urlAddBtn && urlInput) {
                urlAddBtn.addEventListener('click', function () {
                    const url = urlInput.value.trim();
                    if (url) {
                        if (isValidUrl(url)) {
                            const type = detectUrlType(url);
                            switch (type) {
                                case 'keyword':
                                    addKeywordTag(extractKeywordFromUrl(url));
                                    updateFollowCount('키워드');
                                    break;
                                case 'social':
                                    addSNSAccount(url);
                                    updateFollowCount('SNS 계정');
                                    break;
                                case 'channel':
                                    addChannel(url);
                                    updateFollowCount('채널');
                                    break;
                                default:
                                    addChannel(url); // 기본적으로 채널로 처리
                                    updateFollowCount('채널');
                            }
                            urlInput.value = '';
                        }
                    }
                });

                // Enter 키로도 추가 가능
                urlInput.addEventListener('keypress', function (e) {
                    if (e.key === 'Enter') {
                        urlAddBtn.click();
                    }
                });
            }

            // URL 제안 버튼들
            const urlSuggestions = document.querySelectorAll('.settings-tab .url-suggestion');
            urlSuggestions.forEach(suggestion => {
                suggestion.addEventListener('click', function () {
                    const baseUrl = this.dataset.url;
                    if (urlInput) {
                        urlInput.value = baseUrl;
                        urlInput.focus();
                    }
                });
            });

            // 삭제 버튼들 이벤트
            initializeRemoveButtons();
        }

        // 키워드 태그 추가 함수
        function addKeywordTag(keyword) {
            const followTags = document.querySelector('.settings-tab .follow-tags');
            const addBtn = followTags.querySelector('.tag-add-btn');

            const newTag = document.createElement('span');
            newTag.className = 'follow-tag';
            newTag.textContent = keyword;
            newTag.addEventListener('click', function () {
                if (confirm(`"${keyword}" 키워드를 삭제하시겠습니까?`)) {
                    this.remove();
                    updateFollowCount('키워드', -1);
                }
            });

            followTags.insertBefore(newTag, addBtn);
        }

        // SNS 계정 추가 함수
        function addSNSAccount(url) {
            const followAccounts = document.querySelector('.settings-tab .follow-accounts');
            const addBtn = followAccounts.querySelector('.account-add-btn');

            const accountInfo = parseAccountUrl(url);

            const newAccount = document.createElement('div');
            newAccount.className = 'follow-account';
            newAccount.innerHTML = `
                <img src="${accountInfo.platform}" alt="${accountInfo.platformName}" class="account-platform">
                <div class="account-info">
                    <div class="account-name">${accountInfo.username}</div>
                    <div class="account-desc">${accountInfo.description}</div>
                </div>
                <button class="account-remove">×</button>
            `;

            followAccounts.insertBefore(newAccount, addBtn);

            // 삭제 버튼 이벤트 추가
            const removeBtn = newAccount.querySelector('.account-remove');
            removeBtn.addEventListener('click', function () {
                if (confirm(`"${accountInfo.username}" 계정을 삭제하시겠습니까?`)) {
                    newAccount.remove();
                    updateFollowCount('SNS 계정', -1);
                }
            });
        }

        // 채널 추가 함수
        function addChannel(url) {
            const followChannels = document.querySelector('.settings-tab .follow-channels');
            const addBtn = followChannels.querySelector('.channel-add-btn');

            const channelInfo = parseChannelUrl(url);

            const newChannel = document.createElement('div');
            newChannel.className = 'follow-channel';
            newChannel.innerHTML = `
                <div class="channel-icon">${channelInfo.icon}</div>
                <div class="channel-info">
                    <div class="channel-name">${channelInfo.name}</div>
                    <div class="channel-desc">${channelInfo.url}</div>
                </div>
                <button class="channel-remove">×</button>
            `;

            followChannels.insertBefore(newChannel, addBtn);

            // 삭제 버튼 이벤트 추가
            const removeBtn = newChannel.querySelector('.channel-remove');
            removeBtn.addEventListener('click', function () {
                if (confirm(`"${channelInfo.name}" 채널을 삭제하시겠습니까?`)) {
                    newChannel.remove();
                    updateFollowCount('채널', -1);
                }
            });
        }

        // 삭제 버튼들 초기화
        function initializeRemoveButtons() {
            // 계정 삭제 버튼들
            const accountRemoveBtns = document.querySelectorAll('.settings-tab .account-remove');
            accountRemoveBtns.forEach(btn => {
                btn.addEventListener('click', function () {
                    const account = this.closest('.follow-account');
                    const accountName = account.querySelector('.account-name').textContent;
                    if (confirm(`"${accountName}" 계정을 삭제하시겠습니까?`)) {
                        account.remove();
                        updateFollowCount('SNS 계정', -1);
                    }
                });
            });

            // 채널 삭제 버튼들
            const channelRemoveBtns = document.querySelectorAll('.settings-tab .channel-remove');
            channelRemoveBtns.forEach(btn => {
                btn.addEventListener('click', function () {
                    const channel = this.closest('.follow-channel');
                    const channelName = channel.querySelector('.channel-name').textContent;
                    if (confirm(`"${channelName}" 채널을 삭제하시겠습니까?`)) {
                        channel.remove();
                        updateFollowCount('채널', -1);
                    }
                });
            });

            // 키워드 태그 클릭 삭제
            const followTags = document.querySelectorAll('.settings-tab .follow-tag');
            followTags.forEach(tag => {
                tag.addEventListener('click', function () {
                    const keyword = this.textContent;
                    if (confirm(`"${keyword}" 키워드를 삭제하시겠습니까?`)) {
                        this.remove();
                        updateFollowCount('키워드', -1);
                    }
                });
            });
        }

        // 팔로우 카운트 업데이트
        function updateFollowCount(type, change = 1) {
            const statCards = document.querySelectorAll('.settings-tab .stat-card');
            statCards.forEach(card => {
                const label = card.querySelector('.stat-label').textContent;
                if (label === type) {
                    const numberElement = card.querySelector('.stat-number');
                    const currentCount = parseInt(numberElement.textContent);
                    const newCount = Math.max(0, currentCount + change);
                    numberElement.textContent = newCount;

                    // 애니메이션 효과
                    numberElement.style.transform = 'scale(1.2)';
                    numberElement.style.color = change > 0 ? '#27ae60' : '#e74c3c';
                    setTimeout(() => {
                        numberElement.style.transform = 'scale(1)';
                        numberElement.style.color = 'var(--accent-blue)';
                    }, 300);

                    // 섹션별 카운트도 업데이트
                    updateSectionCount(type, newCount);
                }
            });
        }

        // 섹션별 카운트 업데이트
        function updateSectionCount(type, count) {
            const sections = document.querySelectorAll('.settings-tab .follow-section');
            sections.forEach(section => {
                const title = section.querySelector('.follow-section-title').textContent;
                if ((type === '키워드' && title === '관심 키워드') ||
                    (type === 'SNS 계정' && title === '팔로우 계정') ||
                    (type === '채널' && title === '구독 채널')) {
                    const countElement = section.querySelector('.follow-section-count');
                    countElement.textContent = `${count}개`;
                }
            });
        }

        // 결제/구독 관리 기능
        function initializeBillingActions() {
            // 플랜 업그레이드 버튼
            const upgradeBtn = document.querySelector('.settings-tab .action-btn.primary');
            if (upgradeBtn) {
                upgradeBtn.addEventListener('click', function () {
                    alert('플랜 업그레이드 기능 준비 중입니다');
                });
            }

            // 결제 내역 버튼
            const historyBtn = document.querySelector('.settings-tab .billing-actions .action-btn.secondary');
            if (historyBtn) {
                historyBtn.addEventListener('click', function () {
                    alert('결제 내역 기능 준비 중입니다');
                });
            }
        }

        // 알림 설정 기능
        function initializeNotificationSettings() {
            const toggles = document.querySelectorAll('.settings-tab .toggle-switch input');

            toggles.forEach(toggle => {
                toggle.addEventListener('change', function () {
                    const settingItem = this.closest('.setting-item');
                    const settingLabel = settingItem.querySelector('.setting-label').textContent;
                    const isEnabled = this.checked;

                    console.log(`${settingLabel}: ${isEnabled ? '활성화' : '비활성화'}`);

                    // 토스트 알림 제거됨
                });
            });
        }

        // 계정 관리 기능
        function initializeAccountActions() {
            // 프로필 편집 버튼
            const editProfileBtn = document.querySelector('.settings-tab .edit-profile-btn');
            if (editProfileBtn) {
                editProfileBtn.addEventListener('click', function () {
                    alert('프로필 편집 기능 준비 중입니다');
                });
            }

            // 비밀번호 변경 버튼
            const changePasswordBtn = document.querySelector('.settings-tab .account-actions .action-btn.secondary');
            if (changePasswordBtn) {
                changePasswordBtn.addEventListener('click', function () {
                    alert('비밀번호 변경 기능 준비 중입니다');
                });
            }

            // 계정 삭제 버튼
            const deleteAccountBtn = document.querySelector('.settings-tab .action-btn.danger');
            if (deleteAccountBtn) {
                deleteAccountBtn.addEventListener('click', function () {
                    if (confirm('정말로 계정을 삭제하시겠습니까?\n이 작업은 되돌릴 수 없습니다.')) {
                        if (confirm('모든 데이터가 영구적으로 삭제됩니다.\n정말 진행하시겠습니까?')) {
                            alert('계정 삭제 기능 준비 중입니다');
                        }
                    }
                });
            }
        }

        // 유효한 URL인지 확인
        function isValidUrl(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }

        // URL 타입 감지
        function detectUrlType(url) {
            const domain = new URL(url).hostname.toLowerCase();

            if (domain.includes('twitter.com') || domain.includes('x.com') ||
                domain.includes('facebook.com') || domain.includes('instagram.com') ||
                domain.includes('linkedin.com')) {
                return 'social';
            } else if (domain.includes('youtube.com') || domain.includes('youtu.be') ||
                domain.includes('twitch.tv') || domain.includes('podcast')) {
                return 'channel';
            } else if (url.includes('keyword=') || url.includes('search=')) {
                return 'keyword';
            } else {
                return 'channel'; // 기본값
            }
        }

        // URL에서 키워드 추출
        function extractKeywordFromUrl(url) {
            try {
                const urlObj = new URL(url);
                const keyword = urlObj.searchParams.get('keyword') ||
                    urlObj.searchParams.get('search') ||
                    urlObj.searchParams.get('q') ||
                    '새 키워드';
                return keyword;
            } catch (_) {
                return '새 키워드';
            }
        }

        // SNS 계정 URL 파싱
        function parseAccountUrl(url) {
            try {
                const urlObj = new URL(url);
                const domain = urlObj.hostname.toLowerCase();
                const pathname = urlObj.pathname;

                let platform = 'sources/x.png';
                let platformName = 'Unknown';
                let username = pathname.split('/')[1] || 'unknown';
                let description = '';

                if (domain.includes('twitter.com') || domain.includes('x.com')) {
                    platform = 'sources/x.png';
                    platformName = 'X';
                    username = '@' + username;
                    description = 'X (Twitter) 계정';
                } else if (domain.includes('facebook.com')) {
                    platform = 'sources/facebook.png';
                    platformName = 'Facebook';
                    description = '페이스북 계정';
                } else if (domain.includes('instagram.com')) {
                    platform = 'sources/x.png'; // 인스타그램 아이콘이 없어서 임시로
                    platformName = 'Instagram';
                    username = '@' + username;
                    description = '인스타그램 계정';
                } else if (domain.includes('linkedin.com')) {
                    platform = 'sources/x.png'; // 링크드인 아이콘이 없어서 임시로
                    platformName = 'LinkedIn';
                    description = '링크드인 계정';
                }

                return {
                    platform,
                    platformName,
                    username,
                    description
                };
            } catch (_) {
                return {
                    platform: 'sources/x.png',
                    platformName: 'Unknown',
                    username: 'unknown',
                    description: '알 수 없는 계정'
                };
            }
        }

        // 채널 URL 파싱
        function parseChannelUrl(url) {
            try {
                const urlObj = new URL(url);
                const domain = urlObj.hostname.toLowerCase();
                const pathname = urlObj.pathname;

                let icon = '📰';
                let name = domain;

                if (domain.includes('youtube.com') || domain.includes('youtu.be')) {
                    icon = '📺';
                    const channelMatch = pathname.match(/\/(channel|c|user)\/([^\/]+)/);
                    name = channelMatch ? channelMatch[2] : 'YouTube 채널';
                } else if (domain.includes('twitch.tv')) {
                    icon = '🎮';
                    name = pathname.split('/')[1] || 'Twitch 채널';
                } else if (domain.includes('naver.com')) {
                    icon = '📰';
                    name = '네이버 뉴스';
                } else if (domain.includes('chosun.com')) {
                    icon = '📰';
                    name = '조선일보';
                } else if (domain.includes('techcrunch.com')) {
                    icon = '📰';
                    name = 'TechCrunch';
                } else if (domain.includes('podcast')) {
                    icon = '🎙️';
                    name = '팟캐스트';
                } else {
                    icon = '🌐';
                    name = domain.replace('www.', '');
                }

                return {
                    icon,
                    name,
                    url: domain
                };
            } catch (_) {
                return {
                    icon: '🌐',
                    name: '알 수 없는 채널',
                    url: url
                };
            }
        }

        // 통계 업데이트
        function updateStats() {
            const statNumbers = document.querySelectorAll('.settings-tab .stat-number');
            statNumbers.forEach(num => {
                const currentValue = parseInt(num.textContent);
                num.textContent = currentValue + 1;

                // 애니메이션 효과
                num.style.transform = 'scale(1.2)';
                num.style.color = '#10b981';
                setTimeout(() => {
                    num.style.transform = 'scale(1)';
                    num.style.color = '#6366f1';
                }, 300);
            });
        }

        // 설정 알림 표시 (비활성화됨)
        function showSettingsNotification(message, type = 'info') {
            // 토스트 알림 기능 비활성화
            return;
        }

        // 리뉴얼된 프로젝트 기능 초기화
        function initializeProjects() {
            console.log('📂 리뉴얼된 프로젝트 탭 기능 초기화');

            // 프로젝트 카드 클릭 이벤트
            initializeProjectCardEvents();

            // 프로젝트 상세 뷰 네비게이션
            initializeProjectDetailNavigation();

            // 새 프로젝트 버튼
            const newProjectButtons = document.querySelectorAll('#newProjectBtn, .new-btn');
            newProjectButtons.forEach(btn => {
                btn.addEventListener('click', function () {
                    const briefingTabButton = document.querySelector('.menu-item[data-tab="briefing"]');
                    if (briefingTabButton) {
                        briefingTabButton.click();
                    }
                });
            });

            // 상세 뷰 탭 전환
            initializeDetailTabs();

            // 뒤로가기 버튼
            initializeBackButton();

            console.log('✅ 리뉴얼된 프로젝트 탭 기능 초기화 완료');
        }

        // 프로젝트 카드 클릭 이벤트
        function initializeProjectCardEvents() {
            const projectCards = document.querySelectorAll('.project-card');

            projectCards.forEach(card => {
                card.addEventListener('click', function () {
                    const projectId = this.dataset.projectId;
                    showProjectDetail(projectId);
                });
            });
        }

        // 프로젝트 상세 뷰 표시
        function showProjectDetail(projectId) {
            console.log(`프로젝트 상세 뷰 표시: ${projectId}`);

            const listView = document.getElementById('projectListView');
            const detailView = document.getElementById('projectDetailView');

            if (listView && detailView) {
                listView.style.display = 'none';
                detailView.style.display = 'flex';

                // 프로젝트 정보 로드
                loadProjectDetail(projectId);
            }
        }

        // 프로젝트 상세 정보 로드
        function loadProjectDetail(projectId) {
            // 샘플 프로젝트 데이터
            const projectData = {
                'grok4-analysis': {
                    title: 'Grok 4 출시 분석',
                    summary: '일론 머스크의 xAI에서 발표한 Grok 4 모델의 시장 영향과 경쟁사 대응 전략에 대한 종합 분석',
                    status: '완료',
                    date: '2024.12.19',
                    sources: [
                        { title: 'Elon Musk\'s xAI launches Grok 4 alongside a $300 ... - TechCrunch', source: 'TechCrunch', type: '🌐' },
                        { title: 'Musk unveils Grok 4 as xAI\'s new AI model that beats ... - The Decoder', source: 'THE-DECODER.com', type: '📰' },
                        { title: 'Musk unveils Grok 4 update a day after xAI chatbot made antisemitic remarks', source: 'CBS News', type: '📺' }
                    ],
                    report: `# Grok 4 출시 분석 리포트

## 📊 주요 요약

### 핵심 이슈
- **AI 모델 경쟁 심화**: OpenAI, Google과의 직접적인 경쟁 구도 형성
- **기술적 성능 향상**: 이전 모델 대비 추론 능력과 속도 개선
- **시장 반응**: 투자자들의 xAI 밸류에이션 상향 조정

### 시장 영향
- AI 섹터 전체 관심도 증가
- 경쟁사들의 대응 전략 가속화
- 기술 인재 확보 경쟁 격화

## 🎯 상세 분석

### 1. 기술적 혁신

**주요 개선사항**
- 멀티모달 처리 능력 강화
- 실시간 웹 검색 기능 통합
- 한국어 포함 다국어 지원 확대

**경쟁 우위**
- X(Twitter) 플랫폼과의 시너지
- 실시간 소셜 미디어 데이터 활용
- 독특한 개성과 유머 감각

### 2. 시장 포지셔닝

**차별화 전략**
- "truth-seeking" AI로 포지셔닝
- 정치적 중립성 표방
- 실시간 정보 처리 강조

**타겟 시장**
- 소셜 미디어 사용자
- 리서치 및 분석 전문가
- 실시간 정보 니즈가 높은 기업

## 📈 투자 시사점

### 단기 영향
- xAI 기업가치 상승 요인
- AI 관련주 전반적 상승 모멘텀
- 테크 섹터 투자 관심 증가

### 중장기 전망
- AI 모델 경쟁 구도 재편
- 플랫폼 종속성 리스크 고려 필요
- 규제 리스크 모니터링 중요

---

*본 분석은 2024년 12월 19일 기준으로 작성되었습니다.*`
                },
                'crypto-trend': {
                    title: '암호화폐 시장 동향',
                    summary: '비트코인 ETF 승인 이후 암호화폐 시장의 변화와 주요 코인들의 가격 움직임 분석',
                    status: '완료',
                    date: '2024.12.18',
                    sources: [],
                    report: ''
                },
                'fed-policy': {
                    title: 'Fed 통화정책 분석',
                    summary: '연준의 금리 인상 정책이 글로벌 경제에 미치는 영향과 향후 전망에 대한 심층 분석',
                    status: '진행중',
                    date: '2024.12.17',
                    sources: [],
                    report: ''
                },
                'korean-startup': {
                    title: '한국 스타트업 생태계',
                    summary: '2024년 한국 스타트업 투자 동향과 주요 성장 분야에 대한 종합적인 시장 분석',
                    status: '완료',
                    date: '2024.12.16',
                    sources: [],
                    report: ''
                }
            };

            const project = projectData[projectId];
            if (project) {
                // 헤더 정보 업데이트
                document.getElementById('projectDetailTitle').textContent = project.title;
                document.getElementById('projectDetailSummary').textContent = project.summary;

                // 상태 업데이트
                const statusElement = document.getElementById('projectDetailStatus');
                statusElement.innerHTML = `
                    <i class="ph ph-${project.status === '완료' ? 'check-circle' : 'clock'}"></i>
                    <span>${project.status}</span>
                `;
                statusElement.className = `project-detail-status ${project.status === '완료' ? 'completed' : 'in-progress'}`;

                // 출처 목록 업데이트
                updateSourcesList(project.sources);

                // 다이어그램 및 테이블 업데이트
                updateDiagramView();

                // 리포트 업데이트
                updateReportView(project.report);
            }
        }

        // 출처 목록 업데이트
        function updateSourcesList(sources) {
            const sourcesList = document.getElementById('sourcesList');
            const sourcesCount = document.querySelector('.sources-count');

            if (sourcesList && sourcesCount) {
                sourcesCount.textContent = `총 ${sources.length}개`;

                sourcesList.innerHTML = sources.map((source, index) => `
                    <div class="source-item">
                        <div class="source-number">${index + 1}.</div>
                        <div class="source-type">${source.type} ${source.source}</div>
                        <div class="source-content">
                            <h4>${source.title}</h4>
                        </div>
                    </div>
                `).join('');
            }
        }

        // 다이어그램 뷰 업데이트
        function updateDiagramView() {
            const tableContainer = document.getElementById('detailTableContainer');

            if (tableContainer) {
                // 홈 탭의 분석 테이블을 복사해서 표시
                const originalTable = document.getElementById('analysisTable');
                if (originalTable) {
                    tableContainer.innerHTML = originalTable.outerHTML;
                }
            }
        }

        // 리포트 뷰 업데이트
        function updateReportView(reportContent) {
            const reportViewer = document.getElementById('reportViewer');

            if (reportViewer && reportContent) {
                // 마크다운을 간단한 HTML로 변환 (실제로는 마크다운 파서 사용)
                const htmlContent = reportContent
                    .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                    .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                    .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                    .replace(/^\*\*(.*)\*\*/gim, '<strong>$1</strong>')
                    .replace(/^\- (.*$)/gim, '<li>$1</li>')
                    .replace(/\n/g, '<br>');

                reportViewer.innerHTML = htmlContent;
            }
        }

        // 새 프로젝트 버튼 초기화
        function initializeNewProjectButton() {
            const newBtn = document.getElementById('newProjectBtn');

            if (newBtn) {
                newBtn.addEventListener('click', function () {
                    alert('새 프로젝트는 홈 탭에서 3단계 과정을 통해 생성할 수 있습니다.');
                });
            }
        }

        // 상세 뷰 탭 전환 초기화
        function initializeDetailTabs() {
            const tabBtns = document.querySelectorAll('.detail-tab-btn');
            const tabPanels = document.querySelectorAll('.detail-tab-panel');

            tabBtns.forEach(btn => {
                btn.addEventListener('click', function () {
                    const tabId = this.dataset.detailTab;

                    // 탭 버튼 활성화 상태 변경
                    tabBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');

                    // 탭 패널 표시/숨김
                    tabPanels.forEach(panel => {
                        panel.classList.remove('active');
                    });

                    const targetPanel = document.getElementById(tabId + 'Panel');
                    if (targetPanel) {
                        targetPanel.classList.add('active');
                    }
                });
            });
        }

        // 뒤로가기 버튼 초기화
        function initializeBackButton() {
            const backBtn = document.getElementById('backToListBtn');

            if (backBtn) {
                backBtn.addEventListener('click', function () {
                    showProjectList();
                });
            }
        }

        // 프로젝트 리스트로 돌아가기
        function showProjectList() {
            const listView = document.getElementById('projectListView');
            const detailView = document.getElementById('projectDetailView');

            if (listView && detailView) {
                detailView.style.display = 'none';
                listView.style.display = 'flex';
            }
        }

        // 프로젝트 상세 뷰 네비게이션 초기화
        function initializeProjectDetailNavigation() {
            // 리포트 액션 버튼들
            const copyReportBtn = document.getElementById('copyReportBtn');
            const downloadReportBtn = document.getElementById('downloadReportBtn');
            const editReportBtn = document.getElementById('editReportBtn');

            if (copyReportBtn) {
                copyReportBtn.addEventListener('click', function () {
                    const reportViewer = document.getElementById('reportViewer');
                    if (reportViewer) {
                        const text = reportViewer.textContent;
                        navigator.clipboard.writeText(text).then(() => {
                            alert('리포트가 클립보드에 복사되었습니다.');
                        });
                    }
                });
            }

            if (downloadReportBtn) {
                downloadReportBtn.addEventListener('click', function () {
                    const reportViewer = document.getElementById('reportViewer');
                    if (reportViewer) {
                        const content = reportViewer.textContent;
                        const blob = new Blob([content], { type: 'text/plain' });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = '프로젝트_리포트.txt';
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                    }
                });
            }

            if (editReportBtn) {
                editReportBtn.addEventListener('click', function () {
                    alert('리포트 편집 기능은 준비 중입니다.');
                });
            }

            // 다이어그램 컨트롤 버튼들
            const detailZoomInBtn = document.getElementById('detailZoomInBtn');
            const detailZoomOutBtn = document.getElementById('detailZoomOutBtn');
            const detailFitToScreenBtn = document.getElementById('detailFitToScreenBtn');

            if (detailZoomInBtn) {
                detailZoomInBtn.addEventListener('click', function () {
                    console.log('다이어그램 확대');
                });
            }

            if (detailZoomOutBtn) {
                detailZoomOutBtn.addEventListener('click', function () {
                    console.log('다이어그램 축소');
                });
            }

            if (detailFitToScreenBtn) {
                detailFitToScreenBtn.addEventListener('click', function () {
                    console.log('화면에 맞춤');
                });
            }
        }

        // 프로젝트 알림 표시 (비활성화됨)
        function showProjectNotification(message, type = 'info') {
            // 토스트 알림 기능 비활성화
            return;
        }

        // 분석 리포트 기능 초기화
        function initializeAnalysisReport() {
            console.log('📊 분석 리포트 탭 기능 초기화');

            // 리포트 메뉴 카드 클릭 이벤트
            const reportMenuCards = document.querySelectorAll('#analysisTab .report-menu-card');
            const reportViews = document.querySelectorAll('#analysisTab .report-view');
            const analysisTitle = document.querySelector('#analysisTab .analysis-title');
            const analysisSubtitle = document.querySelector('#analysisTab .analysis-subtitle');

            reportMenuCards.forEach(card => {
                card.addEventListener('click', function () {
                    const reportType = this.dataset.report;

                    // 메뉴 카드 활성화 상태 변경
                    reportMenuCards.forEach(c => c.classList.remove('active'));
                    this.classList.add('active');

                    // 리포트 뷰 전환
                    reportViews.forEach(view => view.classList.remove('active'));
                    const targetView = document.getElementById(reportType + 'Report');
                    if (targetView) {
                        targetView.classList.add('active');
                    }

                    // 헤더 제목 업데이트
                    updateAnalysisHeader(reportType);
                });
            });

            // 기간 선택 이벤트
            const reportPeriod = document.getElementById('reportPeriod');
            if (reportPeriod) {
                reportPeriod.addEventListener('change', function () {
                    const period = this.value;
                    console.log(`리포트 기간 변경: ${period}`);
                    // 실제로는 데이터를 다시 로드해야 함
                    updateReportData(period);
                });
            }

            // 내보내기 버튼 이벤트
            const exportBtn = document.querySelector('#analysisTab .export-btn');
            if (exportBtn) {
                exportBtn.addEventListener('click', function () {
                    const activeReport = document.querySelector('#analysisTab .report-menu-card.active');
                    const reportType = activeReport ? activeReport.dataset.report : 'overview';

                    // 내보내기 시뮬레이션
                    this.innerHTML = '<i class="ph ph-spinner"></i><span>내보내는 중...</span>';
                    this.disabled = true;

                    setTimeout(() => {
                        this.innerHTML = '<i class="ph ph-download-simple"></i><span>내보내기</span>';
                        this.disabled = false;
                        console.log(`${reportType} 리포트 내보내기 완료`);
                    }, 2000);
                });
            }

            // 차트 바 호버 이벤트
            const chartBars = document.querySelectorAll('#analysisTab .chart-bar');
            chartBars.forEach(bar => {
                bar.addEventListener('mouseenter', function () {
                    const value = this.querySelector('.bar-value').textContent;
                    console.log(`차트 데이터: ${value}`);
                });
            });

            // 히트맵 셀 클릭 이벤트
            const heatmapCells = document.querySelectorAll('#analysisTab .heatmap-cell');
            heatmapCells.forEach(cell => {
                cell.addEventListener('click', function () {
                    const time = this.textContent;
                    console.log(`${time} 시간대 상세 정보`);
                });
            });

            // 인사이트 카드 클릭 이벤트
            const insightCards = document.querySelectorAll('#analysisTab .insight-card');
            insightCards.forEach(card => {
                card.addEventListener('click', function () {
                    const title = this.querySelector('.insight-title').textContent;
                    console.log(`인사이트 상세: ${title}`);
                });
            });

            console.log('✅ 분석 리포트 탭 기능 초기화 완료');
        }

        // 분석 헤더 업데이트
        function updateAnalysisHeader(reportType) {
            const titles = {
                overview: '전체 개요',
                engagement: '참여도 분석',
                channels: '채널 분석',
                content: '콘텐츠 분석',
                ai: 'AI 인사이트'
            };

            const subtitles = {
                overview: '2025년 7월 9일 성과 리포트',
                engagement: '사용자 참여도 및 행동 분석',
                channels: '플랫폼별 성과 및 노출 분석',
                content: '주제별 콘텐츠 성과 분석',
                ai: 'AI 기반 개선 제안 및 예측'
            };

            const analysisTitle = document.querySelector('#analysisTab .analysis-title');
            const analysisSubtitle = document.querySelector('#analysisTab .analysis-subtitle');

            if (analysisTitle) {
                analysisTitle.textContent = titles[reportType] || '분석 리포트';
            }
            if (analysisSubtitle) {
                analysisSubtitle.textContent = subtitles[reportType] || '성과 분석 리포트';
            }
        }

        // 리포트 데이터 업데이트
        function updateReportData(period) {
            const periodTexts = {
                week: '주간',
                month: '월간',
                quarter: '분기'
            };

            const subtitle = document.querySelector('#analysisTab .panel-subtitle');
            if (subtitle) {
                subtitle.textContent = `2024년 12월 • ${periodTexts[period]} 리포트`;
            }

            // 메트릭 값들을 기간에 따라 업데이트 (시뮬레이션)
            const metricValues = document.querySelectorAll('#analysisTab .metric-value');
            metricValues.forEach(value => {
                const currentValue = parseInt(value.textContent.replace(/[^0-9]/g, ''));
                let newValue;

                switch (period) {
                    case 'week':
                        newValue = currentValue;
                        break;
                    case 'month':
                        newValue = Math.floor(currentValue * 4.3);
                        break;
                    case 'quarter':
                        newValue = Math.floor(currentValue * 13);
                        break;
                }

                // 애니메이션 효과
                value.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    value.textContent = newValue.toLocaleString();
                    value.style.transform = 'scale(1)';
                }, 200);
            });
        }

        // 도움말 탭 기능 초기화
        function initializeHelp() {
            console.log('❓ 도움말 탭 기능 초기화');

            // FAQ 아코디언 초기화
            initializeFAQAccordion();

            console.log('✅ 도움말 탭 기능 초기화 완료');
        }

        // 리포트 탭 기능 초기화
        function initializeReportTab() {
            console.log('📄 리포트 탭 기능 초기화');

            // 리포트 생성 버튼 이벤트
            initializeReportGeneration();

            // 템플릿 변경 이벤트
            initializeTemplateOptions();

            // 옵션 변경 이벤트
            initializeReportOptions();

            // 프리뷰 액션 버튼 이벤트
            initializePreviewActions();

            console.log('✅ 리포트 탭 기능 초기화 완료');
        }

        // 리포트 생성 기능
        function initializeReportGeneration() {
            const generateBtn = document.getElementById('generateReportBtn');
            const checkAnalysisBtn = document.getElementById('checkAnalysisBtn');
            const reportLoadingState = document.getElementById('reportLoadingState');
            const reportContent = document.getElementById('reportContent');

            if (generateBtn) {
                generateBtn.addEventListener('click', function () {
                    // 로딩 상태 표시
                    if (reportLoadingState) {
                        reportLoadingState.innerHTML = `
                            <div class="loading-icon">
                                <i class="ph ph-spinner"></i>
                            </div>
                            <h4>리포트 생성 중...</h4>
                            <p>분석 데이터를 바탕으로 리포트를 생성하고 있습니다.</p>
                        `;
                    }

                    // 버튼 비활성화
                    this.disabled = true;
                    this.innerHTML = '<i class="ph ph-spinner"></i><span>생성 중...</span>';

                    // 3초 후 리포트 생성 완료 시뮬레이션
                    setTimeout(() => {
                        if (reportLoadingState) {
                            reportLoadingState.style.display = 'none';
                        }
                        if (reportContent) {
                            reportContent.style.display = 'block';
                        }

                        // 버튼 원래 상태로 복원
                        this.disabled = false;
                        this.innerHTML = '<i class="ph ph-file-text"></i><span>만들기</span>';

                        console.log('✅ 리포트 생성 완료');
                    }, 3000);
                });
            }

            if (checkAnalysisBtn) {
                checkAnalysisBtn.addEventListener('click', function () {
                    // 출처 확인 모달 표시
                    const sourcesInfo = `
📊 분석 출처 정보

🌐 웹 소스 (15개)
• TechCrunch - Elon Musk's xAI launches Grok 4
• THE-DECODER.com - Musk unveils Grok 4
• CBS News - Grok 4 update announcement
• Bloomberg - AI market analysis
• Reuters - Technology sector trends
• (기타 10개 소스...)

📰 뉴스 소스 (7개)
• 조선일보 - 국내 기술 동향
• 한국경제신문 - 글로벌 시장 분석
• 매일경제 - 투자 시장 현황
• (기타 4개 소스...)

📊 데이터 업데이트: 실시간
✅ 신뢰도 점수: 94%
🔄 마지막 동기화: 2024.12.19 14:23
                    `;
                    alert(sourcesInfo);
                });
            }
        }

        // 템플릿 옵션 기능
        function initializeTemplateOptions() {
            const templateOptions = document.querySelectorAll('input[name="template"]');

            templateOptions.forEach(option => {
                option.addEventListener('change', function () {
                    if (this.checked) {
                        console.log(`템플릿 변경: ${this.value}`);
                        updateReportTemplate(this.value);
                    }
                });
            });
        }

        // 리포트 옵션 기능
        function initializeReportOptions() {
            const includeCharts = document.getElementById('includeCharts');
            const includeSourcesList = document.getElementById('includeSourcesList');
            const includeExecutiveSummary = document.getElementById('includeExecutiveSummary');
            const includeRecommendations = document.getElementById('includeRecommendations');

            const options = [includeCharts, includeSourcesList, includeExecutiveSummary, includeRecommendations];

            options.forEach(option => {
                if (option) {
                    option.addEventListener('change', function () {
                        console.log(`옵션 변경: ${this.id} = ${this.checked}`);
                        updateReportOptions();
                    });
                }
            });
        }

        // 프리뷰 액션 버튼 기능
        function initializePreviewActions() {
            const copyTextBtn = document.getElementById('copyTextBtn');
            const copyMarkdownBtn = document.getElementById('copyMarkdownBtn');
            const exportReportBtn = document.getElementById('exportReportBtn');

            if (copyTextBtn) {
                copyTextBtn.addEventListener('click', function () {
                    const markdownContent = document.querySelector('.markdown-preview');
                    if (markdownContent) {
                        const text = markdownContent.textContent;
                        navigator.clipboard.writeText(text).then(() => {
                            showReportNotification('텍스트가 클립보드에 복사되었습니다.');
                        }).catch(err => {
                            console.error('복사 실패:', err);
                            showReportNotification('복사에 실패했습니다.', 'error');
                        });
                    }
                });
            }

            if (copyMarkdownBtn) {
                copyMarkdownBtn.addEventListener('click', function () {
                    const markdownContent = document.querySelector('.markdown-preview');
                    if (markdownContent) {
                        const markdown = markdownContent.textContent;
                        navigator.clipboard.writeText(markdown).then(() => {
                            showReportNotification('마크다운이 클립보드에 복사되었습니다.');
                        }).catch(err => {
                            console.error('복사 실패:', err);
                            showReportNotification('복사에 실패했습니다.', 'error');
                        });
                    }
                });
            }

            if (exportReportBtn) {
                exportReportBtn.addEventListener('click', function () {
                    const markdownContent = document.querySelector('.markdown-preview');
                    if (markdownContent) {
                        const content = markdownContent.textContent;
                        const blob = new Blob([content], { type: 'text/markdown' });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `시장분석리포트_${new Date().toISOString().split('T')[0]}.md`;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);

                        showReportNotification('리포트가 다운로드되었습니다.');
                    }
                });
            }
        }

        // 템플릿 업데이트 함수
        function updateReportTemplate(templateType) {
            const markdownContent = document.querySelector('.markdown-preview');
            if (!markdownContent) return;

            const templates = {
                standard: `# 시장 분석 리포트
*생성일: 2024년 12월 19일*

## 📊 주요 요약

### 핵심 이슈
- **기준금리 인상 우려**: Fed의 공격적 통화정책 스탠스 지속
- **테크주 밸류에이션 부담**: AI 버블 우려와 실적 하향 조정
- **중국 경제 둔화 심화**: 부동산 위기와 수출 둔화 가속

### 시장 영향
- 글로벌 유동성 경색 심화
- 리스크 자산 선호도 하락
- 안전자산 선호 현상 지속

## 🎯 상세 분석

### 1. 통화정책 리스크

**현황**
- Fed의 터미널 금리 전망 상향 조정
- 양적긴축 정책 지속으로 시장 유동성 제약
- 장기 채권 수익률 상승 압력 증가

**영향**
- 금융시장 변동성 확대
- 신용 스프레드 확대
- 달러 강세 지속 가능성

### 2. 기술주 조정 리스크

**현황**
- 나스닥 PER 35배 돌파로 과대평가 우려
- AI 관련 투자 ROI 불확실성 증가
- 실적 성장률 둔화 전망

**영향**
- 성장주 포트폴리오 재조정 필요
- 밸류에이션 리스크 관리 중요
- 섹터 로테이션 가속화 예상

### 3. 중국 경제 둔화

**현황**
- GDP 성장률 4.5%로 하향 조정
- 부동산 시장 위기 지속
- 수출 경쟁력 약화

**영향**
- 글로벌 공급망 재편 가속
- 원자재 수요 둔화
- 아시아 경제 전반 영향

## 📈 투자 시사점

### 단기 전략
1. **방어적 포지션 강화**
   - 현금 비중 확대
   - 안전자산 편입 증가
   - 변동성 헤지 전략 적용

2. **섹터 선별**
   - 필수소비재 및 유틸리티 선호
   - 고성장 기술주 비중 축소
   - 배당주 및 가치주 관심 증가

### 중장기 전략
1. **포트폴리오 다변화**
   - 지역별 분산투자 강화
   - 대안투자 비중 확대
   - ESG 요소 고려 증가

2. **리스크 관리**
   - 환헤지 전략 강화
   - 금리 리스크 관리
   - 유동성 관리 중요성 증대

## 🔍 모니터링 포인트

### 주요 지표
- Fed 통화정책 회의 결과
- 중국 경제 지표 발표
- 기업 실적 발표 시즌

### 핵심 리스크
- 지정학적 리스크 확대
- 인플레이션 재가속
- 금융시스템 안정성

## 📝 결론

현재 시장은 **통화정책 불확실성**과 **경제 성장 둔화** 우려가 복합적으로 작용하고 있습니다. 

**단기적**으로는 방어적 포지션 강화와 변동성 관리가 중요하며, **중장기적**으로는 포트폴리오 다변화와 리스크 관리 체계 구축이 필요합니다.

---

*본 리포트는 AI 분석 시스템을 통해 생성되었으며, 투자 결정 시 추가적인 전문가 검토를 권장합니다.*`,
                executive: `# 요약 리포트
*생성일: 2024년 12월 19일*

## 🎯 핵심 결론

### 시장 현황
- **통화정책 불확실성**: Fed의 공격적 금리 정책 지속
- **기술주 조정**: AI 버블 우려와 밸류에이션 부담
- **중국 경제 둔화**: 부동산 위기와 수출 감소

### 즉시 대응 필요사항
1. **포트폴리오 방어 강화** (우선순위: 높음)
2. **현금 비중 확대** (우선순위: 높음)
3. **리스크 헤지 전략 적용** (우선순위: 중간)

## 📊 주요 지표

| 지표 | 현재 | 전망 | 영향 |
|------|------|------|------|
| Fed 금리 | 5.25% | 5.5%+ | 높음 |
| 나스닥 PER | 35배 | 하향 조정 | 중간 |
| 중국 GDP | 4.5% | 둔화 지속 | 높음 |

## 🚨 리스크 요인
- **지정학적 리스크**: 우크라이나 전쟁 장기화
- **인플레이션 재가속**: 에너지·식료품 가격 상승
- **금융시스템 불안**: 신용 스프레드 확대

## 💡 권장 액션
1. **즉시 실행** (1주 이내)
   - 현금 비중 20% 이상 확보
   - 변동성 헤지 포지션 구축

2. **단기 실행** (1개월 이내)
   - 방어적 섹터 비중 확대
   - 배당주 포트폴리오 재조정

3. **중장기 실행** (3개월 이내)
   - 대안투자 비중 확대
   - ESG 투자 전략 수립

---

*본 요약은 상세 분석 리포트를 바탕으로 작성되었습니다.*`,
                detailed: `# 상세 리서치 리포트
*생성일: 2024년 12월 19일*

## 📊 분석 방법론

### 데이터 수집
- **1차 데이터**: Fed 공식 발표, 기업 실적 자료
- **2차 데이터**: 언론 보도, 애널리스트 리포트  
- **3차 데이터**: 소셜 미디어 센티먼트

### 분석 프레임워크
- **정량 분석**: 통계적 모델링, 상관관계 분석
- **정성 분석**: 전문가 의견, 시장 센티먼트
- **시나리오 분석**: 베이스/업사이드/다운사이드 케이스

## 🎯 심층 분석

### 1. 통화정책 영향 분석

**Fed 정책 변화 추적**
- 2022년 3월 첫 금리 인상 이후 누적 500bp 인상
- 양적긴축(QT) 월 950억 달러 규모로 지속
- 터미널 금리 전망 5.5%에서 5.75%로 상향 조정

**시장 반응 분석**
- 10년물 국채 수익률 4.8% 수준 상승
- 실질금리 상승으로 성장주 압박 심화
- 달러 인덱스(DXY) 106선 돌파

**파급효과 모델링**
- 금리 1% 상승 시 주식 밸류에이션 8-12% 하락
- 신용 스프레드 확대로 하이일드 채권 위험 증가
- 신흥국 자본 유출 압력 지속

### 2. 기술주 밸류에이션 분석

**현재 밸류에이션 수준**
- 나스닥 100 PER: 35.2배 (과거 10년 평균 24.5배)
- AI 관련주 평균 PER: 45.8배
- 매출 성장률 대비 밸류에이션 프리미엄 확대

**AI 투자 ROI 불확실성**
- 생성형 AI 시장 규모 예측 편차 확대
- 실제 수익화 모델 불투명
- 과대 투자 우려 증가

**섹터별 리스크 분석**
- 반도체: 중국 수요 둔화로 메모리 가격 하락
- 소프트웨어: 구독 모델 성장률 둔화
- 하드웨어: 공급망 비용 상승 압력

### 3. 중국 경제 둔화 분석

**구조적 문제점**
- 부동산 시장 위기: 신규 주택 판매 30% 감소
- 지방정부 부채 위기: 총 부채 GDP 대비 76%
- 인구 고령화: 생산가능인구 감소 시작

**대외 경제 영향**
- 글로벌 수출 둔화: 중국 수입 10% 감소
- 원자재 수요 축소: 철광석, 구리 가격 하락
- 공급망 재편: 베트남, 인도로 생산 이전 가속

**정책 대응 한계**
- 통화 정책 여력 제한: 위안화 약세 압력
- 재정 정책 부담: 부채 비율 상승
- 구조 개혁 필요성: 생산성 향상 과제

## 📈 시나리오 분석

### 베이스 케이스 (확률 50%)
- Fed 금리 5.5%에서 정점
- 경제 성장률 점진적 둔화
- 주식 시장 10-15% 조정

### 업사이드 케이스 (확률 25%)
- 인플레이션 빠른 둔화
- Fed 조기 금리 인하
- 주식 시장 5-10% 상승

### 다운사이드 케이스 (확률 25%)
- 경기 침체 본격화
- 금융시스템 불안 확산
- 주식 시장 20-30% 하락

## 🔍 정량 분석 결과

### 상관관계 분석
- 금리와 주가 상관계수: -0.78
- 달러 강세와 신흥국 주가: -0.65
- VIX와 기술주 수익률: -0.82

### 리스크 지표
- 시장 변동성 (VIX): 현재 22.5 (평균 18.5)
- 신용 스프레드: 현재 245bp (평균 180bp)
- 달러 강세 지수: 현재 106.2 (평균 98.5)

## 💡 투자 전략

### 포트폴리오 구성 권장안
- **현금 및 현금성 자산**: 25% (기존 10%)
- **방어적 주식**: 35% (기존 20%)
- **채권**: 25% (기존 15%)
- **대안투자**: 15% (기존 5%)

### 헤지 전략
- Put 옵션을 활용한 다운사이드 보호
- 변동성 ETF 활용 포지션 구축
- 통화 헤지 강화 (달러 강세 대응)

### 모니터링 체크리스트
- [ ] Fed 정책 회의 결과 (격월)
- [ ] 인플레이션 지표 발표 (월간)
- [ ] 기업 실적 발표 (분기)
- [ ] 중국 경제 지표 (월간)
- [ ] 지정학적 리스크 변화 (수시)

---

*본 분석은 다양한 데이터 소스와 모델을 활용하여 작성되었으며, 시장 상황에 따라 지속적으로 업데이트됩니다.*`
            };

            if (templates[templateType]) {
                markdownContent.textContent = templates[templateType];
            }
        }

        // 리포트 옵션 업데이트 함수
        function updateReportOptions() {
            console.log('리포트 옵션 업데이트됨');
            // 실제로는 옵션에 따라 리포트 내용을 동적으로 변경
        }

        // 리포트 알림 표시 함수
        function showReportNotification(message, type = 'info') {
            // 간단한 알림 대신 console.log 사용
            console.log(`리포트 알림: ${message}`);

            // 실제로는 토스트 알림을 표시할 수 있음
            if (type === 'error') {
                alert(`오류: ${message}`);
            } else {
                // 성공 메시지는 console.log로만 처리
            }
        }

        // 원인 분석 사이드바 초기 상태 설정
        function initializeAnalysisSidebar() {
            console.log('🔍 원인 분석 사이드바 초기화');

            // 초기 상태는 빈 상태로 설정
            const emptyState = document.getElementById('analysisEmptyState');
            const contentState = document.getElementById('analysisContentState');

            if (emptyState) {
                emptyState.style.display = 'block';
            }

            if (contentState) {
                contentState.style.display = 'none';
            }

            // AI 딥 리서치 버튼 초기화
            initializeAIResearchButton();

            // 출처 보기 버튼 이벤트 리스너 초기화
            initializeViewSourcesButtons();

            console.log('✅ 원인 분석 사이드바 초기화 완료 (빈 상태)');
        }



        // FAQ 아코디언 초기화
        function initializeFAQAccordion() {
            const faqItems = document.querySelectorAll('.faq-item');

            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question');
                const answer = item.querySelector('.faq-answer');

                question.addEventListener('click', function () {
                    const isOpen = item.classList.contains('open');

                    // 다른 모든 FAQ 항목 닫기
                    faqItems.forEach(faqItem => {
                        faqItem.classList.remove('open');
                    });

                    // 현재 항목 토글
                    if (!isOpen) {
                        item.classList.add('open');
                    }
                });
            });
        }

        // 추가 안전장치: 모든 스크립트 로드 후 확인
        window.addEventListener('load', function () {
            console.log('🔍 스크립트 로드 상태 확인:', {
                issueClusters: window.issueClusters?.length || 0,
                projectTemplates: Object.keys(window.projectTemplates || {}).length,
                utils: !!window.utils,
                appState: !!window.appState,
                components: !!window.initializeComponents,
                interactions: !!window.initializeInteractions
            });

            // 탭 초기화
            initializeTabs();

            // 브리핑 탭 초기화 (기본 탭이므로 처음에 초기화)
            initializeBriefingTabs();

            // 프로필 드롭다운 초기화
            initializeProfileDropdown();

            // 원인 분석 사이드바 초기 상태 설정 (빈 상태로 시작)
            initializeAnalysisSidebar();

            // 리포트 탭 기능 초기화
            initializeReportTab();

            // 만약 데이터가 없다면 강제로 다시 시도
            if (!window.issueClusters || window.issueClusters.length === 0) {
                console.warn('⚠️ 데이터 로드 실패, 0.5초 후 재시도...');
                setTimeout(() => {
                    if (window.initializeComponents) {
                        window.initializeComponents();
                    }
                }, 500);
            }
        });
    </script>
</body>

</html>